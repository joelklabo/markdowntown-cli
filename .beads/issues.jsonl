{"id":"markdowntown-cli-083","title":"Core: Claude adapter","description":"- Implement Claude adapter: memory hierarchy (project/user/local), `.claude/rules` modules, frontmatter paths, and imports (ignore code blocks, max depth).\n- Handle CLAUDE.local.md support and deprecation warnings.\n\nAcceptance criteria:\n- Adapter resolves memory chain in documented order and records applied files.\n- Rules modules are applied with path scoping and import limits.\n- Tests validate memory precedence and import behavior.\n\nEdge cases:\n- Missing rules directory, circular imports, CLAUDE.local.md present with deprecation warning.\n\n## Files\n- internal/instructions/claude.go (create: Claude adapter)\n- internal/instructions/claude_test.go (create: Claude adapter tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestClaudeAdapter`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:55:28.425357-08:00","created_by":"honk","updated_at":"2025-12-30T23:55:28.425357-08:00","labels":["adapters","core"],"dependencies":[{"issue_id":"markdowntown-cli-083","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:28.427288-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-083","depends_on_id":"markdowntown-cli-aps","type":"blocks","created_at":"2025-12-30T23:59:16.494034-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-0xn","title":"Infra: dev tooling (Makefile, golangci, lefthook)","description":"- Add local dev tooling: Makefile targets, golangci-lint config, lefthook hooks.\n- Ensure `make check` runs lint + tests and matches CI expectations.\n\nAcceptance criteria:\n- Makefile includes build/test/lint/check/coverage targets per spec.\n- `.golangci.yml` enforces strict linting.\n- `.lefthook.yml` runs lint + tests on commit.\n\nEdge cases:\n- Ensure Windows paths and shells are supported in Makefile/CI.\n\nRisks/assumptions:\n- golangci-lint v2 is used (config version 2).\n\n## Files\n- Makefile (create: build/test/lint/check targets)\n- .golangci.yml (create: lint configuration)\n- .lefthook.yml (create: pre-commit hooks)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (see docs/cli-transcripts/markdowntown-cli-0xn/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-0xn/make-check.txt\n\n## Close Notes\n- Issues encountered: golangci-lint config needed version 2 and gofmt moved to formatters before lint passed.\n- Setup improvements: pin golangci-lint version in docs/CI to avoid config drift.\n- Debug info that would have helped: expected golangci-lint config version for the local binary.","acceptance_criteria":"Local tooling matches spec + make check works","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2025-12-30T15:55:40.419945-08:00","created_by":"honk","updated_at":"2025-12-30T16:56:08.738205-08:00","closed_at":"2025-12-30T16:56:08.738205-08:00","close_reason":"Implemented","labels":["infra","tooling"],"dependencies":[{"issue_id":"markdowntown-cli-0xn","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:55:40.422327-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-0xn","depends_on_id":"markdowntown-cli-za8","type":"blocks","created_at":"2025-12-30T16:01:19.26407-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-12r","title":"Docs: dev workflow follow-ups","description":"- Document git remote/tracking setup required for bd workflow.\n- Document preferred tooling for docs screenshot generation and fuzzing guidance.\n- Link the dev notes from README.\n\nAcceptance criteria:\n- README links to contributing/dev workflow notes.\n- Dev docs describe required git remote setup for bd push/pull.\n- Dev docs describe screenshot generation tooling and recommended fuzz duration.\n\nEdge cases:\n- Keep guidance shell-agnostic where possible.\n\nRisks/assumptions:\n- Tooling availability may differ across environments.\n\n## Files\n- README.md (modify: link to contributing/dev notes)\n- docs/CONTRIBUTING.md (create: dev workflow notes)\n- docs/USER_GUIDE.md (modify: link to fuzzing guidance if needed)\n- docs/scripts/render-scan-screenshot.py (create: screenshot generator)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-12r/make-check.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: documented remote setup and screenshot tooling in `docs/CONTRIBUTING.md`.\n- Debug info that would have helped: earlier mention of required remote/tracking setup.","status":"closed","priority":3,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T18:47:24.912099-08:00","created_by":"honk","updated_at":"2025-12-30T18:53:05.258566-08:00","closed_at":"2025-12-30T18:53:05.258566-08:00","close_reason":"Implemented","dependencies":[{"issue_id":"markdowntown-cli-12r","depends_on_id":"markdowntown-cli-fyg","type":"parent-child","created_at":"2025-12-30T18:47:24.913628-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-3a4","title":"Security: scan hardening + error handling tests","description":"- Review security/privacy risks for filesystem scanning (symlink loops, permission errors, path traversal).\n- Add targeted tests for permission-denied and circular symlink warnings.\n- Document security considerations and guardrails.\n\nAcceptance criteria:\n- Security notes captured in `docs/architecture/security.md`.\n- Tests cover permission-denied + circular symlink warning behavior.\n- Scanner behavior avoids unsafe path traversal and handles errors gracefully.\n\nEdge cases:\n- Broken symlinks and external targets.\n- Files changing during scan.\n\nRisks/assumptions:\n- Test fixtures can simulate permission errors across OSes.\n\n## Files\n- docs/architecture/security.md (create: security notes + mitigations)\n- internal/scan/scanner_test.go (create: permission + symlink tests)\n- testdata/repos/security/README.md (create: fixture seed)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-3a4/make-check.txt\n\n## Close Notes\n- Issues encountered: gosec permission warnings and symlink path variance in tests; adjusted permissions and matching.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Security notes + tests for perms/symlinks","status":"closed","priority":1,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2025-12-30T15:59:08.563791-08:00","created_by":"honk","updated_at":"2025-12-30T18:10:05.986329-08:00","closed_at":"2025-12-30T18:10:05.986329-08:00","close_reason":"Implemented","labels":["security","testing"],"dependencies":[{"issue_id":"markdowntown-cli-3a4","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:59:08.566078-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-3a4","depends_on_id":"markdowntown-cli-tan","type":"blocks","created_at":"2025-12-30T16:02:23.65615-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-3pc","title":"Release: packaging + uninstall verification","description":"- Ensure new data/templates are included in packaging/release artifacts.\n- Validate install/uninstall steps (Homebrew or go install) and document them.\n- Confirm goreleaser config includes new assets.\n\nAcceptance criteria:\n- Release config includes new data files and templates.\n- Install/uninstall guidance is accurate and tested.\n- CI passes for snapshot release or build.\n\nEdge cases:\n- Missing assets in release bundle, stale docs in packaging notes.\n\n## Files\n- .goreleaser.yml (modify: include new assets)\n- README.md (modify: packaging/uninstall notes)\n\n## QA Evidence\n- Release check: `make build` or `goreleaser release --snapshot --clean`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:57:38.428674-08:00","created_by":"honk","updated_at":"2025-12-30T23:57:38.428674-08:00","labels":["release"],"dependencies":[{"issue_id":"markdowntown-cli-3pc","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:57:38.430277-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-3pc","depends_on_id":"markdowntown-cli-mpg","type":"blocks","created_at":"2025-12-31T00:00:26.091423-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-3pc","depends_on_id":"markdowntown-cli-tkw","type":"blocks","created_at":"2025-12-31T00:00:31.423024-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-4s8","title":"Design: scan architecture + schema map + CLI UX notes","description":"- Draft architecture notes mapping spec to packages (scan, registry, matcher, git, hash, output, CLI).\n- Define JSON schema constants and determinism rules (ordering, timestamps, warnings).\n- Capture CLI UX behavior (TTY progress, exit codes, version output).\n\nAcceptance criteria:\n- `docs/architecture/scan.md` describes data flow + concurrency approach.\n- `docs/architecture/registry.md` documents registry load/validation behavior.\n- Spec clarifications are reflected in `docs/scan-spec-v1.md` without changing intent.\n\nEdge cases:\n- Case-insensitive matching on all platforms.\n- Symlink cycles + external targets.\n- git not available or repo not detected.\n\nRisks/assumptions:\n- CLI-only (no UI/Playwright).\n- Final file list may shift as implementation details surface.\n\n## Files\n- docs/architecture/scan.md (create: architecture + data flow)\n- docs/architecture/registry.md (create: registry load/validate notes)\n- docs/scan-spec-v1.md (modify: align spec with architecture clarifications)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (fails: no Makefile yet; see docs/cli-transcripts/markdowntown-cli-4s8/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-4s8/make-check.txt\n\n## Close Notes\n- Issues encountered: `make check` target missing (Makefile not created yet); repo started with unborn HEAD and untracked baseline files; no `origin` remote configured so push failed.\n- Setup improvements: seed repo with initial commit/main branch and Makefile before design tasks to keep QA green; set remote before worker push.\n- Debug info that would have helped: expected QA command when Makefile is absent.","acceptance_criteria":"Architecture docs + spec alignment complete","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2025-12-30T15:54:49.311979-08:00","created_by":"honk","updated_at":"2025-12-30T16:36:33.895506-08:00","closed_at":"2025-12-30T16:36:33.895506-08:00","close_reason":"Implemented","labels":["design","planning"],"dependencies":[{"issue_id":"markdowntown-cli-4s8","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:54:49.313793-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-4uq","title":"Core: Adapter interface + Codex resolution","description":"- Define adapter interface for resolving effective instruction chains.\n- Implement Codex adapter: AGENTS.override.md precedence, fallback filenames, CODEX_HOME, size cap (`project_doc_max_bytes`), and audit metadata.\n\nAcceptance criteria:\n- Adapter interface supports deterministic ordering + conflict reporting.\n- Codex resolution matches documented instruction chain behavior.\n- Unit tests validate precedence and size-limit behavior.\n\nEdge cases:\n- Both AGENTS.override.md and AGENTS.md in same dir, missing CODEX_HOME, custom fallback filenames.\n\n## Files\n- internal/instructions/adapter.go (create: adapter interface)\n- internal/instructions/codex.go (create: Codex adapter)\n- internal/instructions/codex_test.go (create: Codex adapter tests)\n- docs/cli-transcripts/markdowntown-cli-4uq/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-4uq/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestCodexAdapter`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-4uq/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-4uq/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T23:54:59.545415-08:00","created_by":"honk","updated_at":"2025-12-31T00:38:26.82752-08:00","closed_at":"2025-12-31T00:38:26.82752-08:00","close_reason":"Implemented","labels":["adapters","core"],"dependencies":[{"issue_id":"markdowntown-cli-4uq","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:59.547223-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-4uq","depends_on_id":"markdowntown-cli-blo","type":"blocks","created_at":"2025-12-30T23:59:05.831028-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-4xm","title":"Epic: markdowntown scan v1 CLI","description":"Complete implementation of markdowntown scan v1 CLI.\n\n## Objective\nDeliver a deterministic, machine-readable inventory of AI tool config files across repo + user scopes with registry-backed patterns, suitable for audits/CI/onboarding. Includes scan, registry validate, and tools list commands with strict JSON output and reproducible ordering.\n\n## Primary User Case\nA developer or platform engineer runs `markdowntown scan` in a repo to produce stable JSON output that captures Codex/Copilot/Claude/etc. config files without extra setup or network access (except for optional registry validation).\n\n## Success Criteria\n- [x] `markdowntown scan` emits deterministic JSON per schema, including repo + user scopes, hashes, frontmatter, gitignored status, warnings, and sorted output.\n- [x] Pattern registry loads from XDG locations with ambiguity detection and env override.\n- [x] `markdowntown registry validate` performs syntax/schema/pattern/doc checks with JSON results.\n- [x] `markdowntown tools list` outputs a tool summary JSON array.\n- [x] CI + lint + tests + coverage thresholds pass across Go 1.22/1.23 and OS matrix.\n- [x] Docs cover usage, Codex CLI niceties, and QA evidence expectations.\n\n## QA Evidence Requirements\n- Playwright coverage for UI flows (N/A for CLI-only)\n- Screenshots stored in `docs/screenshots/scan-cli/`\n- DevTools MCP checks (N/A for CLI-only)\n- FE/BE logs reviewed (N/A for CLI-only)\n- CI green proof (commands recorded in each task)\n\n## Risks/Assumptions\n- Oracle critique script failed locally due to `skip_claude`/`claude_pid` unbound variables; proceeding without oracle feedback.\n- Cursor + Claude Code docs are JS-heavy; pattern verification may need manual review.\n- Gemini CLI docs for `.geminiignore`/`GEMINI.md` may require verification in the upstream repo docs.\n- Git is required and available on all target environments.\n\n## Out of Scope\n- Remote repo scanning (`scan-remote`)\n- `--for-file` effective config resolution\n- Multi-root workspace support\n- Custom user registries beyond `MARKDOWNTOWN_REGISTRY`\n\n## Sources\n- https://developers.openai.com/codex/guides/agents-md\n- https://developers.openai.com/codex/cli/slash-commands\n- https://developers.openai.com/codex/skills\n- https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot\n- https://docs.cline.bot/features/cline-rules\n- https://docs.continue.dev/configuration/configuration-file\n- https://aider.chat/docs/config.html\n- https://git-scm.com/docs/git-check-ignore\n- https://pkg.go.dev/golang.org/x/sync/errgroup\n- https://pkg.go.dev/path/filepath\n- https://pkg.go.dev/net/http\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured; `python` is not available (used `python3`).\n- Setup improvements: follow-up improvements tracked in epic `markdowntown-cli-fyg` (docs for git remote setup, screenshot tooling, fuzzing guidance).\n- Debug info that would have helped: clearer repo onboarding for remote configuration and docs tooling.","acceptance_criteria":"Scan/registry/tools list complete; CI green; docs + QA evidence present","status":"closed","priority":2,"issue_type":"epic","assignee":"unassigned","estimated_minutes":960,"created_at":"2025-12-30T15:53:49.499717-08:00","created_by":"honk","updated_at":"2025-12-30T18:48:33.713179-08:00","closed_at":"2025-12-30T18:48:33.713179-08:00","close_reason":"Implemented","labels":["cli","epic","scan"]}
{"id":"markdowntown-cli-54c","title":"Core: Gemini adapter","description":"- Implement Gemini adapter: global + ancestor + subtree scan; respect .gitignore and .geminiignore; configurable context file names.\n- Record concatenation order and applied files for audit.\n\nAcceptance criteria:\n- Adapter scans ancestors to repo root and subdirectories below cwd.\n- `.gitignore` and `.geminiignore` rules are honored.\n- Tests cover ancestor/subtree behavior and file name configuration.\n\nEdge cases:\n- Multiple context filenames configured, ignored files under nested directories.\n\n## Files\n- internal/instructions/gemini.go (create: Gemini adapter)\n- internal/instructions/gemini_test.go (create: Gemini adapter tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestGeminiAdapter`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:55:41.082541-08:00","created_by":"honk","updated_at":"2025-12-30T23:55:41.082541-08:00","labels":["adapters","core"],"dependencies":[{"issue_id":"markdowntown-cli-54c","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:41.084262-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-54c","depends_on_id":"markdowntown-cli-083","type":"blocks","created_at":"2025-12-30T23:59:21.828176-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-587","title":"Core: registry loader + matcher + types","description":"- Implement registry loader with XDG lookup, env override, and ambiguity errors.\n- Add schema types for patterns, tools, and output structs (with JSON tags).\n- Implement case-insensitive glob/regex matcher and pattern compilation.\n\nAcceptance criteria:\n- Registry load order honors XDG + binary-adjacent path and fails on multiple registries.\n- Matcher supports glob + regex with case-insensitive matching.\n- Pattern structs cover required fields and are reused across commands.\n\nEdge cases:\n- Malformed regex/glob compile errors.\n- `~` expansion and OS path separators.\n\nRisks/assumptions:\n- Glob `**` support uses doublestar v4.\n\n## Files\n- internal/scan/registry.go (create: registry loading)\n- internal/scan/matcher.go (create: glob/regex matching)\n- internal/scan/types.go (create: registry + output types)\n- data/ai-config-patterns.json (modify: align with schema if needed)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `go test ./...` (see docs/cli-transcripts/markdowntown-cli-587/go-test.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-587/go-test.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider documenting the registry filename and XDG path defaults in CONTRIBUTING.\n- Debug info that would have helped: expected registry file name near the binary.","acceptance_criteria":"Registry loads + matcher compiles; types defined","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:56:21.53001-08:00","created_by":"honk","updated_at":"2025-12-30T16:48:23.349756-08:00","closed_at":"2025-12-30T16:48:23.349756-08:00","close_reason":"Implemented","labels":["core","registry"],"dependencies":[{"issue_id":"markdowntown-cli-587","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:21.531981-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-587","depends_on_id":"markdowntown-cli-za8","type":"blocks","created_at":"2025-12-30T16:01:30.011664-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-5l5","title":"Core: tools list command","description":"- Implement `markdowntown tools list` command wired to registry.\n- Aggregate patterns into tool summaries (toolId/toolName/count/docs).\n- Output JSON array with deterministic ordering.\n\nAcceptance criteria:\n- `markdowntown tools list` returns JSON array sorted by toolId.\n- Uses registry loader and handles missing/invalid registry errors.\n\nEdge cases:\n- Multiple patterns per tool; duplicate docs list handling.\n\nRisks/assumptions:\n- Registry must be loaded before command runs.\n\n## Files\n- cmd/markdowntown/main.go (modify: add tools list command)\n- internal/scan/tools_list.go (create: build tool summary output)\n- internal/scan/registry.go (modify: expose loaded registry)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (see docs/cli-transcripts/markdowntown-cli-5l5/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-5l5/make-check.txt\n\n## Close Notes\n- Issues encountered: lint flagged unused runGit return value; adjusted helper signature.\n- Setup improvements: add lint target to CI so these issues surface earlier.\n- Debug info that would have helped: expected lint rules for unparam.","acceptance_criteria":"Tools list emits deterministic JSON","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2025-12-30T15:56:40.343354-08:00","created_by":"honk","updated_at":"2025-12-30T17:06:16.47027-08:00","closed_at":"2025-12-30T17:06:16.47027-08:00","close_reason":"Implemented","labels":["cli","core"],"dependencies":[{"issue_id":"markdowntown-cli-5l5","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:40.345078-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-5l5","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:01:35.367496-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-5y6","title":"Tests: registry/cache/fetcher/snapshot","description":"- Add unit tests for source registry validation, XDG paths, metadata store, fetcher (robots/ETag), and WARC snapshot writer.\n- Use httptest servers to simulate conditional requests and robots.txt.\n\nAcceptance criteria:\n- Tests cover success + failure paths for registry, cache, fetcher, and WARC writer.\n- Deterministic test data in testdata/ where needed.\n\nEdge cases:\n- 304 responses, disallowed robots paths, malformed WARC records.\n\n## Files\n- internal/suggest/registry_test.go (modify: extend coverage)\n- internal/suggest/metadata_test.go (modify: extend coverage)\n- internal/suggest/fetcher_test.go (modify: extend coverage)\n- internal/suggest/warc_test.go (modify: extend coverage)\n- testdata/suggest/ (create: fixture payloads)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestRegistry|TestFetcher|TestWARC`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:56:23.658277-08:00","created_by":"honk","updated_at":"2025-12-30T23:56:23.658277-08:00","labels":["infra","tests"],"dependencies":[{"issue_id":"markdowntown-cli-5y6","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:23.66023-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-5y6","depends_on_id":"markdowntown-cli-e9m","type":"blocks","created_at":"2025-12-30T23:59:48.543982-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-6sg","title":"Core: Claim extraction + conflict detection","description":"- Extract explicit normative claims (MUST/SHOULD/MAY) and build proof objects.\n- Assign stable claim IDs and track source spans + snapshot IDs.\n- Detect conflicting claims in overlapping scope; fail closed when conflicts exist.\n\nAcceptance criteria:\n- Claims are extracted deterministically with normative strength.\n- Proof objects include sources, snapshot IDs, spans, and conflict references.\n- Conflicting claims suppress suggestions and emit conflict records.\n\nEdge cases:\n- Ambiguous language, duplicated claims across sources, conflicts across doc versions.\n\n## Files\n- internal/suggest/claims.go (create: claim model + extraction)\n- internal/suggest/conflict.go (create: conflict detection)\n- internal/suggest/claims_test.go (create: extraction/conflict tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestClaims`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:54:44.241171-08:00","created_by":"honk","updated_at":"2025-12-30T23:54:44.241171-08:00","labels":["conflict","core"],"dependencies":[{"issue_id":"markdowntown-cli-6sg","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:44.242938-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-6sg","depends_on_id":"markdowntown-cli-kuw","type":"blocks","created_at":"2025-12-30T23:58:55.185236-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-6sg","depends_on_id":"markdowntown-cli-blo","type":"blocks","created_at":"2025-12-30T23:59:00.499139-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-6t6","title":"Core: git integration (root + gitignore)","description":"- Implement git root detection (`git rev-parse --show-toplevel`).\n- Add gitignore detection via `git check-ignore` (prefer batch/--stdin).\n- Return error if git unavailable or repo missing when required.\n\nAcceptance criteria:\n- Repo root detection works from any cwd within repo.\n- Gitignore checks return per-path boolean and tolerate missing files.\n- Errors are surfaced as fatal when git is missing.\n\nEdge cases:\n- Paths outside repo when `--repo` is provided.\n- Large batches; handle command length limits.\n\nRisks/assumptions:\n- Git available on PATH in all target envs.\n\n## Files\n- internal/git/root.go (create: repo root detection)\n- internal/git/ignore.go (create: git check-ignore wrapper)\n- internal/git/git.go (create: shared git command helpers)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `go test ./...` (see docs/cli-transcripts/markdowntown-cli-6t6/go-test.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-6t6/go-test.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: document expected path format for git check-ignore inputs.\n- Debug info that would have helped: examples of gitignore behavior for absolute vs relative paths.","acceptance_criteria":"Repo root + gitignore checks implemented","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2025-12-30T15:57:21.750757-08:00","created_by":"honk","updated_at":"2025-12-30T17:01:05.586067-08:00","closed_at":"2025-12-30T17:01:05.586067-08:00","close_reason":"Implemented","labels":["core","git"],"dependencies":[{"issue_id":"markdowntown-cli-6t6","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:57:21.752729-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-6t6","depends_on_id":"markdowntown-cli-za8","type":"blocks","created_at":"2025-12-30T16:01:46.125081-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-72e","title":"Infra: Source registry + validation","description":"- Add a strict JSON source registry for documentation sources with trust tiers, refresh cadence, and allowlisted hosts.\n- Implement loader + validator (schema validation, duplicate URL detection, tier checks).\n- Expose registry loading errors as CLI diagnostics.\n\nAcceptance criteria:\n- Registry file exists with Tier-0/Tier-1 sources for Codex/Copilot/VS Code/Claude/Gemini.\n- Validation fails on unknown tiers, duplicate URLs, or missing required fields.\n- Unit tests cover registry parsing + validation errors.\n\nEdge cases:\n- Multiple registries present, missing registry, or invalid JSON.\n\n## Files\n- data/doc-sources.json (create: source registry)\n- internal/suggest/registry.go (create: loader/validator)\n- internal/suggest/registry_test.go (create: validation tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestRegistry`\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-72e/go-test.txt`, `docs/cli-transcripts/markdowntown-cli-72e/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider adding a short README describing source registry fields.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T23:53:28.450003-08:00","created_by":"honk","updated_at":"2025-12-31T00:22:38.793272-08:00","closed_at":"2025-12-31T00:22:38.793272-08:00","close_reason":"Implemented","labels":["infra","registry"],"dependencies":[{"issue_id":"markdowntown-cli-72e","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:28.451908-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-72e","depends_on_id":"markdowntown-cli-76j","type":"blocks","created_at":"2025-12-30T23:58:17.849301-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-76j","title":"Design: Suggest CLI contract + schemas","description":"- Define command hierarchy (`suggest`, `resolve`, `audit`), flag schema, output formats (`--format json|md`, `--json`), exit codes, and stdout/stderr behavior.\n- Specify config precedence (flags \u003e env \u003e project \u003e user \u003e system) and XDG locations for config/cache.\n- Document evidence-only, fail-closed rules and proof object fields (sources, snapshot IDs, spans, normative strength, conflicts).\n\nAcceptance criteria:\n- New spec doc defines CLI contract, flags, exit codes, output schemas, and non-interactive expectations.\n- Output JSON schema is explicit and stable (versioned).\n- Config/cache locations and precedence are stated with examples.\n\nEdge cases:\n- Unknown client, stale cache, offline mode, partial refresh failures, stdout not a TTY.\n\n## Files\n- docs/suggest-spec-v1.md (create: CLI contract + output schema)\n- docs/architecture/suggest.md (create: pipeline + proof object overview)\n\n## QA Evidence\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-76j/make-test.txt` (exit 0)\n- Notes: doc-only change, ensure no lint/test regressions\n\n## Close Notes\n- Issues encountered: push initially failed due to `GITHUB_TOKEN` overriding gh credentials; used `env -u GITHUB_TOKEN` to push.\n- Setup improvements: clarify gh auth vs GITHUB_TOKEN for pushes in dev docs.\n- Debug info that would have helped: earlier note that `gh auth switch` is blocked while `GITHUB_TOKEN` is set.\n","status":"closed","priority":1,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T23:52:52.83884-08:00","created_by":"honk","updated_at":"2025-12-31T00:13:19.997445-08:00","closed_at":"2025-12-31T00:13:19.997445-08:00","close_reason":"Implemented","labels":["cli","design"],"dependencies":[{"issue_id":"markdowntown-cli-76j","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:52:52.841209-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-7x3","title":"Testing: raise coverage to 80%","description":"- Add tests to raise overall coverage to \u003e= 80%.\n- Focus on CLI entrypoints and low-coverage helpers.\n\nAcceptance criteria:\n- Coverage gate set back to 80% and CI green.\n- New tests cover cmd entrypoints, registry validation, tools list, and git root error paths.\n\nEdge cases:\n- Ensure registry validation docs check can be stubbed or skipped in tests.\n\nRisks/assumptions:\n- Some CLI paths rely on filesystem/git; use temp dirs and stubs.\n\n## Files\n- cmd/markdowntown/main_test.go (create: CLI flag/usage tests)\n- internal/scan/registry_validate_test.go (create: validation helpers coverage)\n- internal/scan/tools_list_test.go (create: tool summary coverage)\n- internal/git/root_test.go (modify: error paths)\n- .github/workflows/ci.yml (modify: restore 80% coverage gate)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n\n## Close Notes (fill in at closure)\n- Issues encountered: [brief list]\n- Setup improvements: [brief list]\n- Debug info that would have helped: [brief list]","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T19:46:59.634737-08:00","created_by":"honk","updated_at":"2025-12-30T19:47:30.014893-08:00"}
{"id":"markdowntown-cli-9bi","title":"Core: registry validate command","description":"- Implement `markdowntown registry validate` command.\n- Validate JSON syntax/schema, pattern compilation, unique IDs, and docs reachability.\n- Emit JSON report with pass/fail details per check.\n\nAcceptance criteria:\n- Validation errors include full pattern dump on malformed entries.\n- Docs reachability follows redirects and reports non-2xx.\n- Output JSON matches spec with checks breakdown.\n\nEdge cases:\n- Multiple registries detected (fail fast).\n- Timeouts or network errors for doc checks.\n\nRisks/assumptions:\n- Network access allowed only for validate command.\n\n## Files\n- cmd/markdowntown/main.go (modify: add registry validate command)\n- internal/scan/registry_validate.go (create: validation logic)\n- internal/scan/registry.go (modify: expose raw registry + errors)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (see docs/cli-transcripts/markdowntown-cli-9bi/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-9bi/make-check.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider making docs reachability timeout configurable.\n- Debug info that would have helped: expected HTTP method for docs reachability checks.","acceptance_criteria":"Registry validate emits full JSON report","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:56:59.832058-08:00","created_by":"honk","updated_at":"2025-12-30T17:13:57.310726-08:00","closed_at":"2025-12-30T17:13:57.310726-08:00","close_reason":"Implemented","labels":["cli","core"],"dependencies":[{"issue_id":"markdowntown-cli-9bi","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:59.8338-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-9bi","depends_on_id":"markdowntown-cli-5l5","type":"blocks","created_at":"2025-12-30T16:01:40.739505-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-a05","title":"Core: scanner discovery + symlink handling","description":"- Implement scan discovery across repo + user scopes and stdin-provided paths.\n- Walk directories, follow symlinks, and track visited inodes to avoid cycles.\n- Collect file metadata (path, size, mtime, depth) and match registry patterns.\n\nAcceptance criteria:\n- Scanner enumerates files for repo + user roots and stdin paths.\n- Symlink resolution records resolved target and skips cycles with warnings.\n- Matching respects case-insensitive glob/regex and full relative paths.\n\nEdge cases:\n- External symlinks pointing outside roots.\n- Unreadable directories/files (continue + warn).\n\nRisks/assumptions:\n- File traversal performance on large repos.\n\n## Files\n- internal/scan/scanner.go (create: discovery pipeline)\n- internal/scan/matcher.go (modify: expose compiled matcher)\n- internal/scan/types.go (modify: add scan/config structs)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-a05/make-check.txt\n\n## Close Notes\n- Issues encountered: revive flagged ScanOptions/ScanResult stutter; renamed to Options/Result.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Scanner discovers files + resolves symlinks","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:57:42.030092-08:00","created_by":"honk","updated_at":"2025-12-30T17:38:15.116138-08:00","closed_at":"2025-12-30T17:38:15.116138-08:00","close_reason":"Implemented","labels":["core","scan"],"dependencies":[{"issue_id":"markdowntown-cli-a05","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:57:42.031998-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-a05","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:01:51.488905-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-a05","depends_on_id":"markdowntown-cli-6t6","type":"blocks","created_at":"2025-12-30T16:01:56.851973-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-aps","title":"Core: Copilot + VS Code adapters","description":"- Implement Copilot adapter: repo-wide instructions, path-specific applyTo rules, AGENTS/CLAUDE/GEMINI agent files, and excludeAgent handling.\n- Implement VS Code adapter: instruction types combined with undefined order; emit conflicts when order-dependent.\n- Surface settings gates (e.g., instruction files require VS Code setting enabled).\n\nAcceptance criteria:\n- Copilot adapter flags nondeterministic conflicts between repo-wide and path-specific instructions.\n- VS Code adapter marks ordering as undefined and fails closed for order-dependent suggestions.\n- Unit tests cover applyTo matching and conflict detection.\n\nEdge cases:\n- Multiple applyTo patterns, conflicting agent instructions, instruction files present but feature disabled.\n\n## Files\n- internal/instructions/copilot.go (create: Copilot adapter)\n- internal/instructions/vscode.go (create: VS Code adapter)\n- internal/instructions/copilot_test.go (create: Copilot tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestCopilotAdapter`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:55:15.007651-08:00","created_by":"honk","updated_at":"2025-12-30T23:55:15.007651-08:00","labels":["adapters","core"],"dependencies":[{"issue_id":"markdowntown-cli-aps","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:15.009524-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-aps","depends_on_id":"markdowntown-cli-4uq","type":"blocks","created_at":"2025-12-30T23:59:11.140498-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-blo","title":"Design: Adapter matrix + conflict policy","description":"- Define adapter behavior matrix per client (Codex, Copilot, VS Code, Claude, Gemini): discovery roots, traversal, merge order, overrides, size limits, and settings gates.\n- Specify conflict detection rules and fail-closed behavior for nondeterministic or undefined merges.\n- Map documented instruction file semantics into deterministic adapter interfaces.\n\nAcceptance criteria:\n- Matrix document enumerates per-client discovery + merge semantics with citations.\n- Conflict policy describes how and when suggestions are suppressed.\n- Adapter interface contract is documented (inputs/outputs, ordering guarantees, error states).\n\nEdge cases:\n- Multiple instruction file types with undefined order (VS Code), conflicting applyTo instructions (Copilot), deprecated/optional files (CLAUDE.local.md).\n\n## Files\n- docs/architecture/instruction-adapters.md (create: client matrix + conflict policy)\n\n## QA Evidence\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-blo/make-test.txt` (exit 0)\n- Notes: doc-only change, ensure no lint/test regressions\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider documenting adapter-matrix source links in a single registry file.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":1,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T23:53:13.116703-08:00","created_by":"honk","updated_at":"2025-12-31T00:16:36.945095-08:00","closed_at":"2025-12-31T00:16:36.945095-08:00","close_reason":"Implemented","labels":["adapters","design"],"dependencies":[{"issue_id":"markdowntown-cli-blo","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:13.118793-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-blo","depends_on_id":"markdowntown-cli-76j","type":"blocks","created_at":"2025-12-30T23:58:12.499865-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-c7q","title":"Security: allowlist + secrets handling","description":"- Enforce source allowlist and scheme validation (https-only) for fetches.\n- Ensure no secrets are accepted via CLI flags; document env/file-based credentials if needed in future.\n- Add sanitization for file paths and cache writes to avoid traversal.\n\nAcceptance criteria:\n- Unknown hosts are rejected with explicit errors.\n- Fetcher rejects non-HTTPS sources.\n- Security notes documented in spec/user guide.\n\nEdge cases:\n- Redirects to non-allowlisted domains, malformed URLs, path traversal attempts.\n\n## Files\n- internal/suggest/fetcher.go (modify: allowlist/https enforcement)\n- internal/suggest/registry.go (modify: host validation)\n- internal/suggest/fetcher_test.go (modify: HTTPS enforcement test)\n- docs/suggest-spec-v1.md (modify: security notes)\n- docs/cli-transcripts/markdowntown-cli-c7q/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-c7q/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestFetcherSecurity`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-c7q/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-c7q/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"in_progress","priority":1,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T23:57:22.262888-08:00","created_by":"honk","updated_at":"2025-12-31T00:52:18.33559-08:00","labels":["security"],"dependencies":[{"issue_id":"markdowntown-cli-c7q","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:57:22.264551-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-c7q","depends_on_id":"markdowntown-cli-zxd","type":"blocks","created_at":"2025-12-31T00:00:15.358089-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-c7q","depends_on_id":"markdowntown-cli-72e","type":"blocks","created_at":"2025-12-31T00:00:20.734819-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-e9m","title":"Core: Snapshot storage (WARC + hash)","description":"- Store raw fetches as WARC records (request/response/metadata) for auditability.\n- Compute immutable content hashes for snapshots and persist index mapping.\n- Record provenance metadata linking suggestions to snapshot IDs.\n\nAcceptance criteria:\n- WARC writer produces valid records for responses and metadata.\n- Snapshot index includes URL, fetch time, hash, and WARC offset info.\n- Tests validate hash stability and WARC record structure.\n\nEdge cases:\n- Large responses, truncated downloads, unsupported content types.\n\n## Files\n- internal/suggest/warc.go (create: WARC writer)\n- internal/suggest/provenance.go (create: provenance metadata)\n- internal/suggest/warc_test.go (create: WARC tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestWARC`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:54:08.220746-08:00","created_by":"honk","updated_at":"2025-12-30T23:54:08.220746-08:00","labels":["core","storage"],"dependencies":[{"issue_id":"markdowntown-cli-e9m","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:08.222595-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-e9m","depends_on_id":"markdowntown-cli-shp","type":"blocks","created_at":"2025-12-30T23:58:39.18106-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-e9m","depends_on_id":"markdowntown-cli-zxd","type":"blocks","created_at":"2025-12-30T23:58:44.519202-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-edi","title":"Tests: CLI integration + transcripts","description":"- Add integration tests for `suggest`, `resolve`, and `audit` with golden JSON/Markdown outputs.\n- Capture command transcripts (stdout/stderr + exit codes) for QA evidence.\n- Verify non-interactive behavior and piped stdin where applicable.\n\nAcceptance criteria:\n- Golden tests cover JSON and Markdown output modes.\n- Transcripts are recorded in docs/cli-transcripts.\n- Exit codes are validated for common failure cases.\n\nEdge cases:\n- Offline mode with stale cache, unknown client, missing repo root.\n\n## Files\n- cmd/markdowntown/cli_integration_test.go (create: integration tests)\n- testdata/golden/suggest.json (create: golden output)\n- testdata/golden/resolve.json (create: golden output)\n- docs/cli-transcripts/suggest-cli/ (create: command transcripts)\n\n## QA Evidence\n- CLI tests: `go test ./cmd/markdowntown -run TestSuggestCLI`\n- Transcripts: `docs/cli-transcripts/suggest-cli/*.txt`\n- Non-interactive: piped stdin and no prompt verification\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:56:54.777127-08:00","created_by":"honk","updated_at":"2025-12-30T23:56:54.777127-08:00","labels":["cli","tests"],"dependencies":[{"issue_id":"markdowntown-cli-edi","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:54.778995-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-edi","depends_on_id":"markdowntown-cli-mpg","type":"blocks","created_at":"2025-12-31T00:00:04.547904-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-evm","title":"Testing: fuzz matcher","description":"- Add Go fuzz tests for matcher to exercise glob/regex compilation and matching.\n- Ensure fuzz target guards against panics and returns stable results.\n\nAcceptance criteria:\n- `go test -fuzz` runs for matcher with seeded corpus.\n- Fuzz test covers both glob and regex patterns.\n\nEdge cases:\n- Invalid regex inputs and degenerate patterns.\n\nRisks/assumptions:\n- Fuzzing time constraints in CI; keep it short or opt-in.\n\n## Files\n- internal/scan/matcher_fuzz_test.go (create: fuzz target)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-evm/make-check.txt\n- Fuzz: `go test ./internal/scan -fuzz=FuzzCompileAndMatch -fuzztime=3s`\n- Fuzz transcript: docs/cli-transcripts/markdowntown-cli-evm/fuzz.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: configure `origin` remote/tracking branch; clarify expected fuzz time for local runs.\n- Debug info that would have helped: guidance on preferred fuzz duration for CI vs local.","acceptance_criteria":"Matcher fuzz target added","status":"closed","priority":3,"issue_type":"task","assignee":"honk","estimated_minutes":120,"created_at":"2025-12-30T15:59:49.361385-08:00","created_by":"honk","updated_at":"2025-12-30T18:45:39.721764-08:00","closed_at":"2025-12-30T18:45:39.721764-08:00","close_reason":"Implemented","labels":["fuzz","testing"],"dependencies":[{"issue_id":"markdowntown-cli-evm","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:59:49.363714-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-evm","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:02:45.1207-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-evm","depends_on_id":"markdowntown-cli-0xn","type":"blocks","created_at":"2025-12-30T16:02:50.487896-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-ezy","title":"Testing: integration + golden scan tests","description":"- Add fixture repos under `testdata/repos/` (sanitized) and golden JSON outputs.\n- Implement integration tests for scan output (ignore timestamps).\n- Include stdin path handling and multi-tool dedupe cases.\n\nAcceptance criteria:\n- Golden tests compare structural output ignoring timestamps.\n- Integration tests cover repo + user scopes, gitignored flags, and conflict warnings.\n- `go test -update-golden` updates fixtures deterministically.\n\nEdge cases:\n- Circular symlink fixture and permission-denied fixture.\n- Mixed tool matches for same file.\n\nRisks/assumptions:\n- Fixtures remain small enough for CI.\n\n## Files\n- testdata/repos/integration/.cursorrules (create: repo fixture)\n- testdata/repos/integration/.cursor/rules/main.md (create: repo fixture)\n- testdata/repos/integration/shared/config.json (create: repo fixture)\n- testdata/repos/integration/ignored.txt (create: repo fixture)\n- testdata/repos/integration/.gitignore (create: repo fixture)\n- testdata/repos/integration/stdin/unmatched.txt (create: repo fixture)\n- testdata/golden/scan.json (create: golden output)\n- internal/scan/scanner_integration_test.go (create: integration tests)\n- internal/scan/gitignore.go (create: gitignore annotation helper)\n- cmd/markdowntown/main.go (modify: apply gitignore flags)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-ezy/make-check.txt\n\n## Close Notes\n- Issues encountered: gosec flagged golden file read; added #nosec for test-controlled path.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Golden + integration tests cover scan output","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":300,"created_at":"2025-12-30T16:00:11.136062-08:00","created_by":"honk","updated_at":"2025-12-30T18:23:54.024211-08:00","closed_at":"2025-12-30T18:23:54.024211-08:00","close_reason":"Implemented","labels":["integration","testing"],"dependencies":[{"issue_id":"markdowntown-cli-ezy","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T16:00:11.138024-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-ezy","depends_on_id":"markdowntown-cli-tan","type":"blocks","created_at":"2025-12-30T16:02:55.847458-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-ezy","depends_on_id":"markdowntown-cli-3a4","type":"blocks","created_at":"2025-12-30T16:03:01.212776-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-fyg","title":"Epic: scan v1 follow-up improvements","description":"Follow-up improvements based on scan v1 close notes.\n\n## Objective\nCapture and address workflow/documentation gaps discovered during scan v1 delivery.\n\n## Success Criteria\n- [x] Dev docs cover git remote/tracking setup for the bd workflow.\n- [x] Docs call out required tooling for docs screenshots and fuzzing guidance.\n- [x] Updates are linked from README or contributing docs.\n\n## QA Evidence Requirements\n- Playwright coverage for UI flows (N/A for CLI-only)\n- Screenshots stored in docs (N/A for CLI-only)\n- DevTools MCP checks (N/A for CLI-only)\n- FE/BE logs reviewed (N/A for CLI-only)\n- CI green proof (commands recorded in each task)\n\n## Risks/Assumptions\n- Improvements are doc-only and do not change CLI behavior.\n\n## Out of Scope\n- Feature work beyond documentation and workflow guidance\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: dev workflow notes now live in `docs/CONTRIBUTING.md`.\n- Debug info that would have helped: earlier mention of remote setup in repo onboarding.","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-30T18:47:03.484431-08:00","created_by":"honk","updated_at":"2025-12-30T18:54:17.380744-08:00","closed_at":"2025-12-30T18:54:17.380744-08:00","close_reason":"Implemented"}
{"id":"markdowntown-cli-ipp","title":"Docs: README + user guide + screenshots","description":"- Write README + user guide for CLI usage and flags.\n- Document Codex CLI niceties (`/init`, `/prompts`, `/skills`) and registry locations.\n- Capture CLI screenshot(s) for docs.\n\nAcceptance criteria:\n- README includes install + usage examples for scan/registry/tools.\n- `docs/USER_GUIDE.md` covers flags, output schema, and examples.\n- Screenshots live under `docs/screenshots/scan-cli/`.\n\nEdge cases:\n- Keep examples deterministic (no timestamps or paths that vary).\n\nRisks/assumptions:\n- CLI output may shift until final implementation.\n\n## Files\n- README.md (create: usage + examples)\n- docs/USER_GUIDE.md (create: detailed user guide)\n- docs/screenshots/scan-cli/scan-output.png (create: CLI screenshot)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: docs/screenshots/scan-cli/scan-output.png\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-ipp/make-check.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured; `python` is not available (used `python3`).\n- Setup improvements: configure `origin` remote/tracking branch; document preferred tooling for generating docs screenshots.\n- Debug info that would have helped: expected screenshot generation tooling or helper script.","acceptance_criteria":"Docs + screenshots complete","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":180,"created_at":"2025-12-30T16:00:34.359646-08:00","created_by":"honk","updated_at":"2025-12-30T18:41:22.086542-08:00","closed_at":"2025-12-30T18:41:22.086542-08:00","close_reason":"Implemented","labels":["docs"],"dependencies":[{"issue_id":"markdowntown-cli-ipp","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T16:00:34.361618-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-ipp","depends_on_id":"markdowntown-cli-tan","type":"blocks","created_at":"2025-12-30T16:03:11.931378-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-iun","title":"Core: content pipeline (hashing + frontmatter)","description":"- Implement SHA256 hashing and binary detection for scanned files.\n- Parse YAML frontmatter on all files, store frontmatter or parse errors.\n- Populate sizeBytes/sha256/content/contentSkipped fields per spec.\n\nAcceptance criteria:\n- Hashing runs for all files (even large), using raw bytes.\n- Binary files set `contentSkipped: \"binary\"` and `content: null`.\n- Frontmatter parsed on all files with errors captured.\n\nEdge cases:\n- Empty files (warning: \"empty\").\n- Unreadable files (sizeBytes/sha256 null + error code).\n\nRisks/assumptions:\n- No size limit; memory usage should be monitored.\n\n## Files\n- internal/hash/sha256.go (create: hashing helper)\n- internal/scan/frontmatter.go (create: YAML frontmatter parser)\n- internal/scan/scanner.go (modify: integrate content pipeline)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-iun/make-check.txt\n\n## Close Notes\n- Issues encountered: gosec G304 required #nosec; revive required error return order and unused param cleanup.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Hashing + frontmatter populated per spec","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:58:03.626607-08:00","created_by":"honk","updated_at":"2025-12-30T17:46:56.564173-08:00","closed_at":"2025-12-30T17:46:56.564173-08:00","close_reason":"Implemented","labels":["core","scan"],"dependencies":[{"issue_id":"markdowntown-cli-iun","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:58:03.62882-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-iun","depends_on_id":"markdowntown-cli-a05","type":"blocks","created_at":"2025-12-30T16:02:02.190993-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-kuw","title":"Core: Document normalization (HTML/MD)","description":"- Normalize HTML/Markdown into structured sections with stable anchors.\n- Preserve span offsets for proof objects without exposing spans to users.\n- Ensure deterministic output across runs.\n\nAcceptance criteria:\n- Normalizer handles HTML + Markdown inputs deterministically.\n- Each section provides stable IDs for claim spans.\n- Tests cover typical doc structures and edge cases.\n\nEdge cases:\n- Nested headings, code blocks, inline code spans, malformed HTML.\n\n## Files\n- internal/suggest/normalize.go (create: HTML/MD normalization)\n- internal/suggest/normalize_test.go (create: normalization tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestNormalize`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:54:26.150478-08:00","created_by":"honk","updated_at":"2025-12-30T23:54:26.150478-08:00","labels":["core","parsing"],"dependencies":[{"issue_id":"markdowntown-cli-kuw","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:26.152297-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-kuw","depends_on_id":"markdowntown-cli-e9m","type":"blocks","created_at":"2025-12-30T23:58:49.851604-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-lp8","title":"Epic: Evidence-Only Instruction Suggestions CLI","description":"Complete implementation of the correctness-first, evidence-only CLI workflow that distills authoritative documentation into suggestions for agent instruction files (Codex-first, extensible to Copilot/VS Code/Claude/Gemini).\n\n## Objective\nDeliver a CLI that produces only source-backed suggestions (fail-closed), includes a resolve/audit view of effective instruction chains, and refreshes documentation automatically without exposing the compilation pipeline to end users.\n\n## Success Criteria\n- [ ] `markdowntown suggest --client codex` emits suggestions only when Tier-0/1 evidence exists; every suggestion includes source links.\n- [ ] `markdowntown resolve --client \u003ccodex|copilot|vscode|claude|gemini\u003e` outputs effective instruction chains and flags conflicts/undefined ordering.\n- [ ] Built-in refresh respects robots.txt and uses conditional GETs; snapshots are stored with immutable hashes and provenance metadata.\n- [ ] JSON/Markdown outputs are stable, documented, and validated; stdout/stderr and exit codes are deterministic.\n- [ ] Config and cache locations follow XDG conventions.\n\n## QA Evidence Requirements\n- CLI integration coverage for `suggest`, `resolve`, and `audit`\n- Command transcripts (stdout/stderr + exit codes)\n- Non-interactive verification (no prompts; piped stdin where applicable)\n- Output formats validated (`--format json|md`, `--json`)\n- Config precedence + location verified (XDG)\n- Packaging + uninstall steps verified\n- CI green proof\n\n## Risks/Assumptions\n- Official docs define client discovery/merge semantics and can change over time; daily refresh is required.\n- Copilot/VS Code instruction ordering can be nondeterministic or undefined, requiring conflict detection and fail-closed behavior.\n- Robots.txt and conditional HTTP requirements must be honored; refresh may skip sources that disallow crawling.\n- Snapshot storage (WARC + hashes) increases disk usage and needs pruning policy.\n\n## Out of Scope\n- MCP server or background daemon\n- Inference beyond explicit documentation statements\n- Telemetry/analytics collection\n- Private or authenticated documentation sources\n\n## Sources\n- https://developers.openai.com/codex/guides/agents-md/\n- https://developers.openai.com/codex/config-reference\n- https://docs.github.com/en/copilot/how-tos/configure-custom-instructions/add-repository-instructions\n- https://code.visualstudio.com/docs/copilot/customization/custom-instructions\n- https://docs.claude.com/en/docs/claude-code/memory\n- https://geminicli.com/docs/cli/gemini-md/\n- https://www.rfc-editor.org/rfc/rfc9309\n- https://www.rfc-editor.org/rfc/rfc7232\n- https://www.rfc-editor.org/rfc/rfc9110\n- https://www.rfc-editor.org/rfc/rfc6920\n- https://iipc.github.io/warc-specifications/specifications/warc-format/warc-1.1/\n- https://www.sitemaps.org/protocol.html\n- https://specifications.freedesktop.org/basedir-spec/latest/\n- https://docs.brew.sh/Manpage\n","status":"open","priority":1,"issue_type":"epic","assignee":"planner","created_at":"2025-12-30T23:52:33.144425-08:00","created_by":"honk","updated_at":"2025-12-30T23:52:33.144425-08:00","labels":["cli","epic"]}
{"id":"markdowntown-cli-lta","title":"Infra: CI + goreleaser pipelines","description":"- Add GitHub Actions CI matrix for Go 1.22/1.23 across OS/arch.\n- Configure goreleaser + release workflow.\n- Enforce coverage threshold in CI.\n\nAcceptance criteria:\n- `.github/workflows/ci.yml` runs lint, test (with coverage), build matrix.\n- `.github/workflows/release.yml` triggers goreleaser on tags.\n- `.goreleaser.yml` builds cross-platform artifacts.\n\nEdge cases:\n- Windows path handling in CI steps.\n- Ensure `golangci-lint` install works on all OSes.\n\nRisks/assumptions:\n- GitHub Actions runners have required tooling.\n\n## Files\n- .github/workflows/ci.yml (create: CI matrix)\n- .github/workflows/release.yml (create: release pipeline)\n- .goreleaser.yml (create: goreleaser config)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-lta/make-check.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: configure `origin` remote/tracking branch so pulls/pushes work.\n- Debug info that would have helped: note expected remote setup in repo onboarding docs.","acceptance_criteria":"CI matrix + release workflows configured","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:56:01.093397-08:00","created_by":"honk","updated_at":"2025-12-30T18:33:06.254288-08:00","closed_at":"2025-12-30T18:33:06.254288-08:00","close_reason":"Implemented","labels":["ci","infra","release"],"dependencies":[{"issue_id":"markdowntown-cli-lta","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:01.095379-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-lta","depends_on_id":"markdowntown-cli-0xn","type":"blocks","created_at":"2025-12-30T16:01:24.642185-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-mpg","title":"CLI: suggest/resolve/audit commands","description":"- Add CLI subcommands: `suggest`, `resolve`, `audit` with flags for client selection, format, refresh/offline, and explain.\n- Ensure stdout/stderr separation and deterministic exit codes.\n- Wire output formatting for JSON/Markdown and `--json` schema.\n\nAcceptance criteria:\n- Commands parse flags and return stable output with non-interactive behavior.\n- `suggest` emits evidence-backed output; `resolve` shows effective instruction chain; `audit` reports conflicts/omissions.\n- Exit codes align with spec; errors printed to stderr only.\n\nEdge cases:\n- Unknown client, no repo root, offline cache stale, format mismatch.\n\n## Files\n- cmd/markdowntown/main.go (modify: add commands/flags)\n- internal/suggest/output.go (create: JSON/MD rendering)\n- internal/suggest/report.go (create: audit output)\n\n## QA Evidence\n- CLI tests: `go test ./cmd/markdowntown -run TestSuggestCLI`\n- Transcripts: `docs/cli-transcripts/suggest-cli/cli-commands.txt`\n- Non-interactive: verify no prompts and piped stdin behavior\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:56:09.537637-08:00","created_by":"honk","updated_at":"2025-12-30T23:56:09.537637-08:00","labels":["cli","core"],"dependencies":[{"issue_id":"markdowntown-cli-mpg","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:09.539539-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-mpg","depends_on_id":"markdowntown-cli-wnh","type":"blocks","created_at":"2025-12-30T23:59:37.858608-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-mpg","depends_on_id":"markdowntown-cli-54c","type":"blocks","created_at":"2025-12-30T23:59:43.195856-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-nx1","title":"Core: output assembly + conflicts/warnings","description":"- Build output assembler for scan results (scans/configs/warnings/timing).\n- Implement deterministic sorting (scope  depth  path, toolId sorting).\n- Add conflict detection + warnings (config conflicts, circular symlink, unreadable).\n\nAcceptance criteria:\n- Output JSON matches schema with stable ordering.\n- Conflicts inferred by tool+scope+kind with override exceptions.\n- Warnings emitted for each occurrence without dedupe.\n\nEdge cases:\n- Multiple tools per file (dedupe by resolved path).\n- Missing stats (sizeBytes/sha256 null).\n\nRisks/assumptions:\n- Sorting stability across OS path separators.\n\n## Files\n- internal/scan/output.go (create: JSON output builder)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-nx1/make-check.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Output JSON deterministic + warnings/conflicts captured","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:58:24.050217-08:00","created_by":"honk","updated_at":"2025-12-30T17:53:18.305442-08:00","closed_at":"2025-12-30T17:53:18.305442-08:00","close_reason":"Implemented","labels":["core","output"],"dependencies":[{"issue_id":"markdowntown-cli-nx1","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:58:24.052433-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-nx1","depends_on_id":"markdowntown-cli-iun","type":"blocks","created_at":"2025-12-30T16:02:07.537915-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-shp","title":"Infra: Cache layout + metadata store","description":"- Implement XDG-based path resolution for config/cache/data roots.\n- Add metadata store for source fetch state (ETag, Last-Modified, last_verified_at, hash IDs).\n- Document pruning/retention expectations for cache.\n\nAcceptance criteria:\n- XDG path resolver covers config, cache, and data roots with tests.\n- Metadata read/write is deterministic and tolerant of partial data.\n- Metadata schema versioning is defined.\n\nEdge cases:\n- Missing directories, read-only cache, corrupted metadata file.\n\n## Files\n- internal/suggest/paths.go (create: XDG path resolver)\n- internal/suggest/metadata.go (create: metadata store)\n- internal/suggest/metadata_test.go (create: metadata tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestMetadata`\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-shp/go-test.txt`, `docs/cli-transcripts/markdowntown-cli-shp/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider documenting metadata file location in user guide.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T23:53:41.555765-08:00","created_by":"honk","updated_at":"2025-12-31T00:27:34.029209-08:00","closed_at":"2025-12-31T00:27:34.029209-08:00","close_reason":"Implemented","labels":["cache","infra"],"dependencies":[{"issue_id":"markdowntown-cli-shp","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:41.557727-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-shp","depends_on_id":"markdowntown-cli-76j","type":"blocks","created_at":"2025-12-30T23:58:23.204876-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-t1y","title":"Testing: unit tests for registry/matcher/git","description":"- Add unit tests for registry loader (XDG precedence, ambiguity errors, env override).\n- Add matcher tests for glob/regex case-insensitive behavior.\n- Add gitignore wrapper tests with stubbed git output.\n\nAcceptance criteria:\n- Tests cover success + error cases for registry load.\n- Matcher tests include glob `**` + regex + case-insensitivity.\n- Gitignore wrapper returns accurate booleans and handles missing files.\n\nEdge cases:\n- Malformed patterns and missing registries.\n\nRisks/assumptions:\n- Git tests use fixtures or mockable command runner.\n\n## Files\n- internal/scan/registry_test.go (create: registry unit tests)\n- internal/scan/matcher_test.go (create: matcher unit tests)\n- internal/git/ignore_test.go (create: gitignore unit tests)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-t1y/make-check.txt\n\n## Close Notes\n- Issues encountered: test helper name conflicted with git.runGit; renamed helper.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Unit tests cover registry/matcher/gitignore","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:59:28.885699-08:00","created_by":"honk","updated_at":"2025-12-30T18:15:36.446448-08:00","closed_at":"2025-12-30T18:15:36.446448-08:00","close_reason":"Implemented","labels":["testing","unit"],"dependencies":[{"issue_id":"markdowntown-cli-t1y","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:59:28.887584-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-t1y","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:02:29.010277-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-t1y","depends_on_id":"markdowntown-cli-6t6","type":"blocks","created_at":"2025-12-30T16:02:34.398725-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-tan","title":"Core: scan command wiring + progress","description":"- Wire `markdowntown scan` command with all flags and output formatting.\n- Implement TTY-aware progress updates to stderr.\n- Support pretty vs compact JSON and trailing newline.\n\nAcceptance criteria:\n- `markdowntown scan` supports `--repo`, `--repo-only`, `--stdin`, `--include-content`, `--compact`, `--quiet`.\n- Progress output disabled when stdout not TTY or `--quiet`.\n- Exit codes align with spec (0 success w/ warnings, 1 fatal).\n\nEdge cases:\n- `--repo` points outside a git worktree.\n- Non-TTY stdout with stderr redirected.\n\nRisks/assumptions:\n- Terminal width detection is available on target OSes.\n\n## Files\n- cmd/markdowntown/main.go (modify: scan command + flags)\n- internal/scan/scanner.go (modify: integrate progress option)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-tan/make-check.txt\n\n## Close Notes\n- Issues encountered: revive flagged builtin names; renamed vars/params.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","acceptance_criteria":"Scan command + flags + progress implemented","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:58:46.485743-08:00","created_by":"honk","updated_at":"2025-12-30T18:00:49.451853-08:00","closed_at":"2025-12-30T18:00:49.451853-08:00","close_reason":"Implemented","labels":["cli","core","scan"],"dependencies":[{"issue_id":"markdowntown-cli-tan","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:58:46.488003-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-tan","depends_on_id":"markdowntown-cli-nx1","type":"blocks","created_at":"2025-12-30T16:02:12.89008-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-tan","depends_on_id":"markdowntown-cli-9bi","type":"blocks","created_at":"2025-12-30T16:02:18.258108-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-tkw","title":"Docs: README + USER_GUIDE + help text","description":"- Update README and USER_GUIDE with new commands, flags, and output examples.\n- Document config/cache locations, refresh behavior, and fail-closed evidence policy.\n- Add packaging/uninstall guidance (brew/uninstall and go install).\n\nAcceptance criteria:\n- README and USER_GUIDE include `suggest`, `resolve`, and `audit` usage.\n- Output examples show source-linked suggestions.\n- Packaging/uninstall steps are documented.\n\nEdge cases:\n- Clarify offline behavior and stale-cache warnings.\n\n## Files\n- README.md (modify: new commands + examples)\n- docs/USER_GUIDE.md (modify: suggest/resolve/audit docs)\n- docs/cli-transcripts/suggest-cli/README.md (create: transcript notes)\n\n## QA Evidence\n- CI: `make test`\n- Docs reviewed for accuracy vs CLI flags\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:57:08.047669-08:00","created_by":"honk","updated_at":"2025-12-30T23:57:08.047669-08:00","labels":["docs"],"dependencies":[{"issue_id":"markdowntown-cli-tkw","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:57:08.049298-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-tkw","depends_on_id":"markdowntown-cli-mpg","type":"blocks","created_at":"2025-12-31T00:00:09.990225-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-wnh","title":"Core: Suggestion generator (Codex-first)","description":"- Convert validated claims into Codex-focused suggestion templates with source links.\n- Enforce fail-closed gating: no suggestion without Tier-0/1 evidence.\n- Emit conflict/omission records for audit output.\n\nAcceptance criteria:\n- Codex suggestions include source URLs and reference proof objects.\n- Suggestions are omitted when evidence is missing or conflicts exist.\n- Tests cover deterministic output ordering and evidence gating.\n\nEdge cases:\n- Multiple sources for the same claim, conflicting snapshots, missing proof spans.\n\n## Files\n- internal/suggest/generator.go (create: suggestion generator)\n- internal/suggest/templates/codex.md (create: template)\n- internal/suggest/generator_test.go (create: generator tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestGenerator`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:55:54.297733-08:00","created_by":"honk","updated_at":"2025-12-30T23:55:54.297733-08:00","labels":["core","suggestions"],"dependencies":[{"issue_id":"markdowntown-cli-wnh","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:54.299767-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wnh","depends_on_id":"markdowntown-cli-6sg","type":"blocks","created_at":"2025-12-30T23:59:27.167588-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wnh","depends_on_id":"markdowntown-cli-4uq","type":"blocks","created_at":"2025-12-30T23:59:32.512031-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-wr6","title":"Tests: claims/conflicts/adapters","description":"- Add unit tests for claim extraction, conflict detection, and adapter resolution behavior.\n- Use fixture docs to verify normative extraction and conflict suppression.\n\nAcceptance criteria:\n- Tests cover MUST/SHOULD/MAY extraction and conflict cases.\n- Adapter tests validate ordering/precedence per client.\n\nEdge cases:\n- Conflicting instructions with undefined order, deprecated files present.\n\n## Files\n- internal/suggest/claims_test.go (modify: extend coverage)\n- internal/instructions/codex_test.go (modify: extend coverage)\n- internal/instructions/copilot_test.go (modify: extend coverage)\n- internal/instructions/claude_test.go (modify: extend coverage)\n- internal/instructions/gemini_test.go (modify: extend coverage)\n- testdata/instructions/ (create: adapter fixtures)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestClaims`\n- Unit tests: `go test ./internal/instructions -run Test.*Adapter`\n- CI: `make test`\n","status":"open","priority":2,"issue_type":"task","assignee":"planner","created_at":"2025-12-30T23:56:39.759089-08:00","created_by":"honk","updated_at":"2025-12-30T23:56:39.759089-08:00","labels":["core","tests"],"dependencies":[{"issue_id":"markdowntown-cli-wr6","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:39.760836-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wr6","depends_on_id":"markdowntown-cli-6sg","type":"blocks","created_at":"2025-12-30T23:59:53.888698-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wr6","depends_on_id":"markdowntown-cli-54c","type":"blocks","created_at":"2025-12-30T23:59:59.214494-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-za8","title":"Infra: init Go module + CLI skeleton","description":"- Initialize Go module and baseline CLI entrypoint.\n- Add version constants and wire `--version` output formatting contract.\n- Create base package layout (`cmd/`, `internal/` scaffolding).\n\nAcceptance criteria:\n- `go.mod` targets Go 1.22+ and builds a minimal `markdowntown` binary.\n- `cmd/markdowntown/main.go` defines root command + subcommands stubs.\n- Version constants live in a dedicated package and are imported by CLI.\n\nEdge cases:\n- `--version` works without registry or git available.\n\nRisks/assumptions:\n- CLI framework is stdlib/cobra-like; keep light dependency footprint.\n- Module path assumed as `markdowntown-cli` until a canonical repo URL is provided.\n\n## Files\n- go.mod (create: module definition)\n- go.sum (create: dependency lockfile if needed)\n- cmd/markdowntown/main.go (create: CLI skeleton + version flag)\n- internal/version/version.go (create: version + schema constants)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `go test ./...` (see docs/cli-transcripts/markdowntown-cli-za8/go-test.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-za8/go-test.txt\n\n## Close Notes\n- Issues encountered: module path assumed as `markdowntown-cli` without canonical repo URL.\n- Setup improvements: define module import path and add git remote before pushing.\n- Debug info that would have helped: expected module path or repository URL.","acceptance_criteria":"Go module + CLI skeleton builds; version flag wired","status":"closed","priority":2,"issue_type":"task","assignee":"honk","estimated_minutes":240,"created_at":"2025-12-30T15:55:17.278846-08:00","created_by":"honk","updated_at":"2025-12-30T16:41:40.729286-08:00","closed_at":"2025-12-30T16:41:40.729286-08:00","close_reason":"Implemented","labels":["cli","go","infra"],"dependencies":[{"issue_id":"markdowntown-cli-za8","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:55:17.280798-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-za8","depends_on_id":"markdowntown-cli-4s8","type":"blocks","created_at":"2025-12-30T16:01:13.884133-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-zxd","title":"Core: HTTP fetcher (robots + conditional GET)","description":"- Implement fetcher that honors robots.txt and uses conditional requests (ETag/If-None-Match, Last-Modified/If-Modified-Since).\n- Bound discovery using sitemap when available; enforce allowlisted hosts from source registry.\n- Persist fetch results into metadata store for reuse.\n\nAcceptance criteria:\n- Fetcher skips disallowed paths per robots.txt and records skip reasons.\n- Conditional requests reuse cached content on 304 responses.\n- Host allowlist enforced; unknown hosts rejected with clear errors.\n\nEdge cases:\n- robots.txt missing/unreachable, 429/5xx responses, redirects to non-allowlisted domains.\n\n## Files\n- internal/suggest/fetcher.go (create: HTTP fetcher)\n- internal/suggest/robots.go (create: robots parsing)\n- internal/suggest/sitemap.go (create: sitemap discovery)\n- internal/suggest/fetcher_test.go (create: httptest coverage)\n- docs/cli-transcripts/markdowntown-cli-zxd/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-zxd/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestFetcher`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-zxd/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-zxd/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","assignee":"honk","created_at":"2025-12-30T23:53:55.032751-08:00","created_by":"honk","updated_at":"2025-12-31T00:47:29.276459-08:00","closed_at":"2025-12-31T00:47:29.276459-08:00","close_reason":"Implemented","labels":["core","fetch"],"dependencies":[{"issue_id":"markdowntown-cli-zxd","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:55.034835-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-zxd","depends_on_id":"markdowntown-cli-72e","type":"blocks","created_at":"2025-12-30T23:58:28.529079-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-zxd","depends_on_id":"markdowntown-cli-shp","type":"blocks","created_at":"2025-12-30T23:58:33.860367-08:00","created_by":"honk"}]}
