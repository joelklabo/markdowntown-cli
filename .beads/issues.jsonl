{"id":"markdowntown-cli-fsd","title":"Core: Audit engine + output schema","description":"Implement the core audit engine and output types.\n\nAcceptance criteria:\n- `internal/audit` defines output schema structs, issue severity taxonomy, and rule interface.\n- Engine produces deterministic ordering (severity → rule ID → path) and stable JSON structure.\n- Includes schema version field and metadata (toolVersion/registryVersion from scan input).\n\nEdge cases:\n- Empty inputs, malformed scan data, and missing registry version fields should return clear errors.\n\n## Files\n- internal/audit/types.go (create: schema structs + severity enum)\n- internal/audit/engine.go (create: rule runner + ordering)\n- internal/audit/engine_test.go (create: ordering + empty input tests)\n- docs/cli-transcripts/markdowntown-cli-fsd/go-test-audit.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-fsd/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/audit -run TestEngine`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-fsd/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-fsd/make-test.txt`\n\n## QA Evidence (Run)\n- Unit tests: `go test ./internal/audit -run TestEngine`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-fsd/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-fsd/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:53:26.944253-08:00","updated_at":"2025-12-31T10:19:46.731261-08:00","closed_at":"2025-12-31T10:19:46.731261-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-fsd","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T09:58:52.124312-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-fsd","depends_on_id":"markdowntown-cli-kan","type":"blocks","created_at":"2025-12-31T10:01:13.639147-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-q7v","title":"Design: Audit spec v1 corrections","description":"Update the audit spec to incorporate the correctness fixes (schema versioning, provenance, redaction, ordering, and rule set changes) and align the architecture doc with the new behavior.\n\n- Change audit schema version string to \"audit-spec-v1\" and pass through scan schema verbatim.\n- Add provenance fields: audit.toolVersion/generatedAt, sourceScan.toolVersion/registryVersion, registryVersionUsed.\n- Fix ordering definition (severity order error \u003e warning \u003e info).\n- Redaction: redact all non-repo paths by default; add deterministic placeholders + pathId.\n- Adjust rules: drop MD008, merge unreadable errors into MD006, MD003 stable message + evidence, MD004 trigger on warning==empty OR sizeBytes==0, MD005 per toolId+kind and scope-aware, MD001 fallback grouping.\n- Add issue fingerprint definition and scanWarnings opt-in behavior.\n- Document new CLI flags: --fail-severity, --redact, --only, --include-scan-warnings, --format md.\n- Update architecture doc to reflect new redaction + provenance + fingerprint.\n\nAcceptance criteria:\n- docs/audit-spec-v1.md reflects all corrected schema, rule, and CLI behaviors.\n- docs/architecture/audit.md matches the updated spec.\n\nEdge cases:\n- Scan schema version does not match semver.\n- Multiple instruction file types with undefined ordering.\n\n## Files\n- docs/audit-spec-v1.md (modify: schema, ordering, rules, CLI flags)\n- docs/architecture/audit.md (modify: redaction + provenance + fingerprint)\n\n## QA Evidence\n- Docs review complete\n- CI: `make test` (exit 0)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-q7v/make-test.txt\n\n## Close Notes\n- Issues encountered: `git checkout main` blocked by worktree lock in `.git/beads-worktrees/main`; used `git fetch` + `git merge --ff-only origin/main` instead.\n- Setup improvements: document worktree lock behavior and the need to push with `env -u GITHUB_TOKEN` if 403s occur.\n- Debug info that would have helped: known workaround for pushing branches with `env -u GITHUB_TOKEN` and using `git push -u origin HEAD`.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T11:58:31.495661-08:00","updated_at":"2025-12-31T12:10:54.842421-08:00","closed_at":"2025-12-31T12:10:54.842421-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-q7v","depends_on_id":"markdowntown-cli-50h","type":"parent-child","created_at":"2025-12-31T11:58:31.497879-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-a05","title":"Core: scanner discovery + symlink handling","description":"- Implement scan discovery across repo + user scopes and stdin-provided paths.\n- Walk directories, follow symlinks, and track visited inodes to avoid cycles.\n- Collect file metadata (path, size, mtime, depth) and match registry patterns.\n\nAcceptance criteria:\n- Scanner enumerates files for repo + user roots and stdin paths.\n- Symlink resolution records resolved target and skips cycles with warnings.\n- Matching respects case-insensitive glob/regex and full relative paths.\n\nEdge cases:\n- External symlinks pointing outside roots.\n- Unreadable directories/files (continue + warn).\n\nRisks/assumptions:\n- File traversal performance on large repos.\n\n## Files\n- internal/scan/scanner.go (create: discovery pipeline)\n- internal/scan/matcher.go (modify: expose compiled matcher)\n- internal/scan/types.go (modify: add scan/config structs)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-a05/make-check.txt\n\n## Close Notes\n- Issues encountered: revive flagged ScanOptions/ScanResult stutter; renamed to Options/Result.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:57:42.030092-08:00","updated_at":"2025-12-30T17:38:15.116138-08:00","closed_at":"2025-12-30T17:38:15.116138-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-a05","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:57:42.031998-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-a05","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:01:51.488905-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-a05","depends_on_id":"markdowntown-cli-6t6","type":"blocks","created_at":"2025-12-30T16:01:56.851973-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-t1y","title":"Testing: unit tests for registry/matcher/git","description":"- Add unit tests for registry loader (XDG precedence, ambiguity errors, env override).\n- Add matcher tests for glob/regex case-insensitive behavior.\n- Add gitignore wrapper tests with stubbed git output.\n\nAcceptance criteria:\n- Tests cover success + error cases for registry load.\n- Matcher tests include glob `**` + regex + case-insensitivity.\n- Gitignore wrapper returns accurate booleans and handles missing files.\n\nEdge cases:\n- Malformed patterns and missing registries.\n\nRisks/assumptions:\n- Git tests use fixtures or mockable command runner.\n\n## Files\n- internal/scan/registry_test.go (create: registry unit tests)\n- internal/scan/matcher_test.go (create: matcher unit tests)\n- internal/git/ignore_test.go (create: gitignore unit tests)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-t1y/make-check.txt\n\n## Close Notes\n- Issues encountered: test helper name conflicted with git.runGit; renamed helper.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:59:28.885699-08:00","updated_at":"2025-12-30T18:15:36.446448-08:00","closed_at":"2025-12-30T18:15:36.446448-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-t1y","depends_on_id":"markdowntown-cli-6t6","type":"blocks","created_at":"2025-12-30T16:02:34.398725-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-t1y","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:59:28.887584-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-t1y","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:02:29.010277-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-blo","title":"Design: Adapter matrix + conflict policy","description":"- Define adapter behavior matrix per client (Codex, Copilot, VS Code, Claude, Gemini): discovery roots, traversal, merge order, overrides, size limits, and settings gates.\n- Specify conflict detection rules and fail-closed behavior for nondeterministic or undefined merges.\n- Map documented instruction file semantics into deterministic adapter interfaces.\n\nAcceptance criteria:\n- Matrix document enumerates per-client discovery + merge semantics with citations.\n- Conflict policy describes how and when suggestions are suppressed.\n- Adapter interface contract is documented (inputs/outputs, ordering guarantees, error states).\n\nEdge cases:\n- Multiple instruction file types with undefined order (VS Code), conflicting applyTo instructions (Copilot), deprecated/optional files (CLAUDE.local.md).\n\n## Files\n- docs/architecture/instruction-adapters.md (create: client matrix + conflict policy)\n\n## QA Evidence\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-blo/make-test.txt` (exit 0)\n- Notes: doc-only change, ensure no lint/test regressions\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider documenting adapter-matrix source links in a single registry file.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T23:53:13.116703-08:00","updated_at":"2025-12-31T00:16:36.945095-08:00","closed_at":"2025-12-31T00:16:36.945095-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-blo","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:13.118793-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-blo","depends_on_id":"markdowntown-cli-76j","type":"blocks","created_at":"2025-12-30T23:58:12.499865-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-7x3","title":"Testing: raise coverage to 80%","description":"- Add tests to raise overall coverage to \u003e= 80%.\n- Focus on CLI entrypoints and low-coverage helpers.\n\nAcceptance criteria:\n- Coverage gate set back to 80% and CI green.\n- New tests cover cmd entrypoints, registry validation, tools list, and git root error paths.\n\nEdge cases:\n- Ensure registry validation docs check can be stubbed or skipped in tests.\n\nRisks/assumptions:\n- Some CLI paths rely on filesystem/git; use temp dirs and stubs.\n\n## Files\n- cmd/markdowntown/main_test.go (create: CLI flag/usage tests)\n- internal/scan/registry_validate_test.go (create: validation helpers coverage)\n- internal/scan/tools_list_test.go (create: tool summary coverage)\n- internal/git/root_test.go (create: error paths)\n- .github/workflows/ci.yml (modify: restore 80% coverage gate)\n- docs/cli-transcripts/markdowntown-cli-7x3/make-check.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make check`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-7x3/make-check.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: gosec flagged test file permissions; updated to 0600.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T19:46:59.634737-08:00","updated_at":"2025-12-31T01:11:30.175921-08:00","closed_at":"2025-12-31T01:11:30.175921-08:00","created_by":"honk"}
{"id":"markdowntown-cli-9k6","title":"Docs: Clarify VS Code + Copilot CLI scan coverage","description":"Update user-facing docs to clarify .github scanning and the new VS Code + Copilot CLI coverage.\n\n- README: clarify repo vs user scope, and explicitly call out that .github is scanned as part of repo scope (only registry patterns, not full directory).\n- USER_GUIDE: update Copilot + VS Code paths with new locations (copilot-instructions dir, copilot CLI MCP config, user profile prompts), and note settings toggles and undefined ordering when multiple instruction types are present.\n- Add guidance for chat.instructionsFilesLocations: if users configure custom instruction locations, include them via --stdin.\n\nAcceptance criteria:\n- README + USER_GUIDE reflect updated paths and guidance.\n- .github scanning confusion addressed explicitly.\n\nEdge cases:\n- Ensure doc wording doesn’t imply scanning all of .github.\n- Avoid implying order guarantees for instruction types.\n\n## Files\n- README.md (modify: repo vs user scope + .github clarification)\n- docs/USER_GUIDE.md (modify: VS Code/Copilot CLI paths + settings notes)\n\n## QA Evidence\n- Docs review complete\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:14:46.306232-08:00","updated_at":"2025-12-31T11:14:46.306232-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-9k6","depends_on_id":"markdowntown-cli-03u","type":"parent-child","created_at":"2025-12-31T11:14:46.308105-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-9k6","depends_on_id":"markdowntown-cli-lrj","type":"blocks","created_at":"2025-12-31T11:15:54.028562-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-9k6","depends_on_id":"markdowntown-cli-29z","type":"blocks","created_at":"2025-12-31T11:16:03.363836-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-yfl","title":"Docs: Audit usage + VS Code/Copilot CLI notes","description":"Document the audit command, VS Code/Copilot CLI patterns, and .github scanning expectations.\n\nAcceptance criteria:\n- README + USER_GUIDE include `audit` usage, output formats, and exit codes.\n- Docs clarify that `.github/` is scanned via registry patterns (e.g., Copilot instructions) and how to add new patterns.\n- Copilot CLI config/agent paths and VS Code instruction types are documented.\n\nEdge cases:\n- Note redaction behavior for user-scope paths and metadata-only default.\n\n## Files\n- README.md (modify: audit command + .github scanning note)\n- docs/USER_GUIDE.md (modify: audit schema, exit codes, VS Code/Copilot CLI notes)\n- docs/cli-transcripts/markdowntown-cli-yfl/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-yfl/make-test.txt`\n\n## QA Evidence (Run)\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-yfl/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:54:52.625402-08:00","updated_at":"2025-12-31T10:58:46.248881-08:00","closed_at":"2025-12-31T10:58:46.248881-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-yfl","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T10:00:13.158843-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-yfl","depends_on_id":"markdowntown-cli-63x","type":"blocks","created_at":"2025-12-31T10:02:53.500661-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-yfl","depends_on_id":"markdowntown-cli-ixm","type":"blocks","created_at":"2025-12-31T10:03:04.303806-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-6sg","title":"Core: Claim extraction + conflict detection","description":"- Extract explicit normative claims (MUST/SHOULD/MAY) and build proof objects.\n- Assign stable claim IDs and track source spans + snapshot IDs.\n- Detect conflicting claims in overlapping scope; fail closed when conflicts exist.\n\nAcceptance criteria:\n- Claims are extracted deterministically with normative strength.\n- Proof objects include sources, snapshot IDs, spans, and conflict references.\n- Conflicting claims suppress suggestions and emit conflict records.\n\nEdge cases:\n- Ambiguous language, duplicated claims across sources, conflicts across doc versions.\n\n## Files\n- internal/suggest/claims.go (create: claim model + extraction + proof metadata)\n- internal/suggest/conflict.go (create: conflict detection + conflict records)\n- internal/suggest/claims_test.go (create: extraction/conflict tests)\n- internal/suggest/normalize.go (add: normalized document types for extraction)\n- internal/suggest/registry.go (add: source schema for claim metadata)\n- internal/suggest/paths.go (add: XDG helpers for registry paths)\n- docs/cli-transcripts/markdowntown-cli-6sg/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-6sg/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestClaims`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-6sg/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-6sg/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: Source/registry types missing on main; added registry + paths + normalize types; renamed tests to match `-run TestClaims`.\n- Setup improvements: clarify dependency merge order for suggest package shared types.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:54:44.241171-08:00","updated_at":"2025-12-31T01:45:01.722043-08:00","closed_at":"2025-12-31T01:45:01.722043-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-6sg","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:44.242938-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-6sg","depends_on_id":"markdowntown-cli-kuw","type":"blocks","created_at":"2025-12-30T23:58:55.185236-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-6sg","depends_on_id":"markdowntown-cli-blo","type":"blocks","created_at":"2025-12-30T23:59:00.499139-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-4s8","title":"Design: scan architecture + schema map + CLI UX notes","description":"- Draft architecture notes mapping spec to packages (scan, registry, matcher, git, hash, output, CLI).\n- Define JSON schema constants and determinism rules (ordering, timestamps, warnings).\n- Capture CLI UX behavior (TTY progress, exit codes, version output).\n\nAcceptance criteria:\n- `docs/architecture/scan.md` describes data flow + concurrency approach.\n- `docs/architecture/registry.md` documents registry load/validation behavior.\n- Spec clarifications are reflected in `docs/scan-spec-v1.md` without changing intent.\n\nEdge cases:\n- Case-insensitive matching on all platforms.\n- Symlink cycles + external targets.\n- git not available or repo not detected.\n\nRisks/assumptions:\n- CLI-only (no UI/Playwright).\n- Final file list may shift as implementation details surface.\n\n## Files\n- docs/architecture/scan.md (create: architecture + data flow)\n- docs/architecture/registry.md (create: registry load/validate notes)\n- docs/scan-spec-v1.md (modify: align spec with architecture clarifications)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (fails: no Makefile yet; see docs/cli-transcripts/markdowntown-cli-4s8/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-4s8/make-check.txt\n\n## Close Notes\n- Issues encountered: `make check` target missing (Makefile not created yet); repo started with unborn HEAD and untracked baseline files; no `origin` remote configured so push failed.\n- Setup improvements: seed repo with initial commit/main branch and Makefile before design tasks to keep QA green; set remote before worker push.\n- Debug info that would have helped: expected QA command when Makefile is absent.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:54:49.311979-08:00","updated_at":"2025-12-30T16:36:33.895506-08:00","closed_at":"2025-12-30T16:36:33.895506-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-4s8","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:54:49.313793-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-03u","title":"Epic: VS Code + Copilot CLI scan coverage refresh","description":"Complete implementation of a VS Code + Copilot CLI scan coverage refresh (paths, settings hints, and docs alignment).\n\n## Objective\nRefresh the scan registry and docs to reflect official VS Code and Copilot CLI instruction/prompt/agent/config locations, clarify .github repo-scope scanning, and handle XDG_CONFIG_HOME overrides for Copilot CLI config.\n\n## Success Criteria\n- [ ] Registry includes Copilot CLI instruction files (.github/copilot-instructions.md + .github/copilot-instructions/**/*.instructions.md), AGENTS.md, custom agents, and MCP config.\n- [ ] VS Code prompt file locations (repo .github/prompts + user profile prompts folder) are documented and covered by the registry where deterministic.\n- [ ] XDG_CONFIG_HOME override for Copilot CLI config/mcp-config is detected deterministically.\n- [ ] Docs explain .github scanning as repo-scope and note undefined ordering when multiple VS Code instruction types coexist.\n- [ ] CI remains green; transcripts captured for CLI + tests.\n\n## QA Evidence Requirements\n- go test ./... (or make test)\n- markdowntown registry validate (network allowed)\n- Command transcripts (stdout/stderr + exit codes) stored under docs/cli-transcripts/\u003ctask-id\u003e/\n- Non-interactive behavior unaffected (scan flags + stdin)\n- CI green proof\n\n## Risks/Assumptions\n- VS Code merges multiple instruction file types without guaranteed order; conflicts must be treated as undefined behavior.\n- Copilot CLI config path uses XDG_CONFIG_HOME when set; assume $XDG_CONFIG_HOME/copilot/config.json and mcp-config.json.\n- VS Code user profile prompt paths may vary by OS; initial support targets ~/.config/Code/User and profiles/* on Unix-like systems.\n\n## Out of Scope\n- Parsing VS Code settings.json for chat.instructionsFilesLocations\n- Remote org-level .github-private repos\n- Schema changes to scan output\n\n## Sources\n- https://code.visualstudio.com/docs/copilot/customization/custom-instructions\n- https://code.visualstudio.com/docs/copilot/copilot-customization#_prompt-files-experimental\n- https://docs.github.com/en/copilot/how-tos/use-copilot-agents/use-copilot-cli\n- https://docs.github.com/en/copilot/how-tos/use-copilot-agents/use-copilot-cli#configuration\n- https://clig.dev/#output\n- https://clig.dev/#exit-codes\n","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-31T11:13:04.707326-08:00","updated_at":"2025-12-31T11:13:04.707326-08:00","created_by":"honk"}
{"id":"markdowntown-cli-r7n","title":"Temp fields acc+design+assignee","description":"temp","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:55:04.841157-08:00","updated_at":"2025-12-31T10:00:35.574986-08:00","closed_at":"2025-12-31T10:00:35.574986-08:00","created_by":"honk"}
{"id":"markdowntown-cli-aps","title":"Core: Copilot + VS Code adapters","description":"- Implement Copilot adapter: repo-wide instructions, path-specific applyTo rules, AGENTS/CLAUDE/GEMINI agent files, and excludeAgent handling.\n- Implement VS Code adapter: instruction types combined with undefined order; emit conflicts when order-dependent.\n- Surface settings gates (e.g., instruction files require VS Code setting enabled).\n\nAcceptance criteria:\n- Copilot adapter flags nondeterministic conflicts between repo-wide and path-specific instructions.\n- VS Code adapter marks ordering as undefined and fails closed for order-dependent suggestions.\n- Unit tests cover applyTo matching and conflict detection.\n\nEdge cases:\n- Multiple applyTo patterns, conflicting agent instructions, instruction files present but feature disabled.\n\n## Files\n- internal/instructions/helpers.go (create: shared applyTo + file helpers)\n- internal/instructions/copilot.go (create: Copilot adapter)\n- internal/instructions/vscode.go (create: VS Code adapter)\n- internal/instructions/copilot_test.go (create: Copilot tests)\n- docs/cli-transcripts/markdowntown-cli-aps/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-aps/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestCopilotAdapter`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-aps/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-aps/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:55:15.007651-08:00","updated_at":"2025-12-31T01:00:50.053211-08:00","closed_at":"2025-12-31T01:00:50.053211-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-aps","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:15.009524-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-aps","depends_on_id":"markdowntown-cli-4uq","type":"blocks","created_at":"2025-12-30T23:59:11.140498-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-e9m","title":"Core: Snapshot storage (WARC + hash)","description":"- Store raw fetches as WARC records (request/response/metadata) for auditability.\n- Compute immutable content hashes for snapshots and persist index mapping.\n- Record provenance metadata linking suggestions to snapshot IDs.\n\nAcceptance criteria:\n- WARC writer produces valid records for responses and metadata.\n- Snapshot index includes URL, fetch time, hash, and WARC offset info.\n- Tests validate hash stability and WARC record structure.\n\nEdge cases:\n- Large responses, truncated downloads, unsupported content types.\n\n## Files\n- internal/suggest/warc.go (create: WARC writer)\n- internal/suggest/provenance.go (create: provenance metadata)\n- internal/suggest/warc_test.go (create: WARC tests)\n- docs/cli-transcripts/markdowntown-cli-e9m/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-e9m/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestWARC`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-e9m/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-e9m/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:54:08.220746-08:00","updated_at":"2025-12-31T01:05:56.918702-08:00","closed_at":"2025-12-31T01:05:56.918702-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-e9m","depends_on_id":"markdowntown-cli-zxd","type":"blocks","created_at":"2025-12-30T23:58:44.519202-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-e9m","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:08.222595-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-e9m","depends_on_id":"markdowntown-cli-shp","type":"blocks","created_at":"2025-12-30T23:58:39.18106-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-wr6","title":"Tests: claims/conflicts/adapters","description":"- Add unit tests for claim extraction, conflict detection, and adapter resolution behavior.\n- Use fixture docs to verify normative extraction and conflict suppression.\n\nAcceptance criteria:\n- Tests cover MUST/SHOULD/MAY extraction and conflict cases.\n- Adapter tests validate ordering/precedence per client.\n\nEdge cases:\n- Conflicting instructions with undefined order, deprecated files present.\n\n## Files\n- internal/suggest/claims_test.go (modify: add fixture-based extraction/conflict tests)\n- internal/instructions/codex_test.go (modify: assert deterministic ordering)\n- internal/instructions/copilot_test.go (modify: assert applied order)\n- internal/instructions/claude_test.go (modify: assert deterministic ordering)\n- internal/instructions/gemini_test.go (modify: assert deterministic ordering + helper rename)\n- testdata/instructions/claims.md (create: normative fixture)\n- testdata/instructions/conflict.md (create: conflict fixture)\n- docs/cli-transcripts/markdowntown-cli-wr6/go-test-claims.txt (create: claims test transcript)\n- docs/cli-transcripts/markdowntown-cli-wr6/go-test-adapters.txt (create: adapter test transcript)\n- docs/cli-transcripts/markdowntown-cli-wr6/make-test.txt (create: CI transcript)\n- internal/suggest/claims.go (add: claim model baseline)\n- internal/suggest/conflict.go (add: conflict detection baseline)\n- internal/suggest/normalize.go (add: doc normalization baseline)\n- internal/suggest/registry.go (add: registry baseline)\n- internal/suggest/paths.go (add: XDG helpers baseline)\n- internal/suggest/generator.go (add: suggestion generator baseline)\n- internal/suggest/fetcher.go (add: HTTP fetcher baseline)\n- internal/suggest/robots.go (add: robots parsing baseline)\n- internal/suggest/sitemap.go (add: sitemap parsing baseline)\n- internal/suggest/output.go (add: output baseline)\n- internal/suggest/report.go (add: report baseline)\n- internal/suggest/templates/codex.md (add: codex template baseline)\n- internal/instructions/adapter.go (add: adapter baseline)\n- internal/instructions/codex.go (add: Codex adapter baseline)\n- internal/instructions/helpers.go (add: helpers baseline)\n- internal/instructions/copilot.go (add: Copilot adapter baseline)\n- internal/instructions/vscode.go (add: VS Code adapter baseline)\n- internal/instructions/claude.go (add: Claude adapter baseline)\n- internal/instructions/gemini.go (add: Gemini adapter baseline)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestClaims`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-wr6/go-test-claims.txt` (exit 0)\n- Unit tests: `go test ./internal/instructions -run 'Test.*Adapter'`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-wr6/go-test-adapters.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-wr6/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: zsh globbing required quoting `Test.*Adapter`; helper name collision fixed by renaming.\n- Setup improvements: add a shared test helper file to avoid duplicate helper names in adapter tests.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:56:39.759089-08:00","updated_at":"2025-12-31T02:18:46.806982-08:00","closed_at":"2025-12-31T02:18:46.806982-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-wr6","depends_on_id":"markdowntown-cli-6sg","type":"blocks","created_at":"2025-12-30T23:59:53.888698-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wr6","depends_on_id":"markdowntown-cli-54c","type":"blocks","created_at":"2025-12-30T23:59:59.214494-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wr6","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:39.760836-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-evm","title":"Testing: fuzz matcher","description":"- Add Go fuzz tests for matcher to exercise glob/regex compilation and matching.\n- Ensure fuzz target guards against panics and returns stable results.\n\nAcceptance criteria:\n- `go test -fuzz` runs for matcher with seeded corpus.\n- Fuzz test covers both glob and regex patterns.\n\nEdge cases:\n- Invalid regex inputs and degenerate patterns.\n\nRisks/assumptions:\n- Fuzzing time constraints in CI; keep it short or opt-in.\n\n## Files\n- internal/scan/matcher_fuzz_test.go (create: fuzz target)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-evm/make-check.txt\n- Fuzz: `go test ./internal/scan -fuzz=FuzzCompileAndMatch -fuzztime=3s`\n- Fuzz transcript: docs/cli-transcripts/markdowntown-cli-evm/fuzz.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: configure `origin` remote/tracking branch; clarify expected fuzz time for local runs.\n- Debug info that would have helped: guidance on preferred fuzz duration for CI vs local.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T15:59:49.361385-08:00","updated_at":"2025-12-30T18:45:39.721764-08:00","closed_at":"2025-12-30T18:45:39.721764-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-evm","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:02:45.1207-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-evm","depends_on_id":"markdowntown-cli-0xn","type":"blocks","created_at":"2025-12-30T16:02:50.487896-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-evm","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:59:49.363714-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-50h","title":"Epic: Audit v1 correctness hardening","description":"Complete the audit v1 corrections and hardening plan: align schema versioning with scan, add provenance + fingerprinting, strengthen redaction, fix ordering, adjust rules (drop MD008, merge unreadable), and update CLI flags, tests, and docs.\n\n## Objective\nShip a correctness-first audit command that matches the revised audit spec (string-tagged schema, provenance fields, deterministic redaction placeholders, stable ordering, and updated rule set) while keeping output deterministic and safe for CI.\n\n## Success Criteria\n- [ ] docs/audit-spec-v1.md reflects the corrected schema, ordering, redaction, and rule set.\n- [ ] Audit JSON includes audit/sourceScan provenance and stable issue fingerprints.\n- [ ] Redaction defaults to hiding all non-repo absolute paths with deterministic placeholders + pathId.\n- [ ] Rules reflect v1 scope: MD001 conflict fallback grouping, MD002 gitignored, MD003 frontmatter invalid (stable message), MD004 empty (warning==empty or sizeBytes==0), MD005 no repo config (per toolId+kind), MD006 unreadable (merged).\n- [ ] CLI flags support --fail-severity, --redact, --only/--exclude, --include-scan-warnings, --format md; exit codes and stdout/stderr follow CLI guidance.\n- [ ] CI green with golden outputs + CLI integration tests.\n\n## QA Evidence Requirements\n- CLI integration coverage for audit\n- Command transcripts (stdout/stderr + exit codes)\n- Non-interactive verification (stdin/pipe input)\n- Output formats validated (json + md)\n- Redaction + fingerprint determinism tested\n- CI green proof\n\n## Risks/Assumptions\n- Scan schema version currently emits 1.0.0; audit must pass through whatever scan reports rather than enforce semver.\n- VS Code merges multiple instruction file types without guaranteed ordering; conflict detection must fail-closed rather than resolve.\n- Redaction placeholders must be stable within a run to keep deterministic output.\n\n## Out of Scope\n- LLM-based suggestions\n- Auto-fix or file mutation\n- SARIF/GitHub annotations (future work)\n\n## Sources\n- https://code.visualstudio.com/docs/copilot/customization/custom-instructions\n- https://code.visualstudio.com/docs/copilot/customization/prompt-files\n- https://docs.github.com/en/copilot/how-tos/use-copilot-agents/use-copilot-cli\n- https://docs.github.com/ko/copilot/how-tos/use-copilot-agents/use-copilot-cli\n- https://clig.dev/\n","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-31T11:58:11.636546-08:00","updated_at":"2025-12-31T11:58:11.636546-08:00","created_by":"honk"}
{"id":"markdowntown-cli-wnh","title":"Core: Suggestion generator (Codex-first)","description":"- Convert validated claims into Codex-focused suggestion templates with source links.\n- Enforce fail-closed gating: no suggestion without Tier-0/1 evidence.\n- Emit conflict/omission records for audit output.\n\nAcceptance criteria:\n- Codex suggestions include source URLs and reference proof objects.\n- Suggestions are omitted when evidence is missing or conflicts exist.\n- Tests cover deterministic output ordering and evidence gating.\n\nEdge cases:\n- Multiple sources for the same claim, conflicting snapshots, missing proof spans.\n\n## Files\n- internal/suggest/generator.go (create: suggestion generation + template rendering)\n- internal/suggest/generator_test.go (create: evidence gating + render tests)\n- internal/suggest/templates/codex.md (create: Codex suggestion template)\n- internal/suggest/claims.go (add: claim model dependency)\n- internal/suggest/conflict.go (add: conflict detection dependency)\n- internal/suggest/normalize.go (add: normalized doc types)\n- internal/suggest/registry.go (add: source schema)\n- internal/suggest/paths.go (add: XDG helpers)\n- docs/cli-transcripts/markdowntown-cli-wnh/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-wnh/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestGenerator`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-wnh/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-wnh/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: renamed generator tests to match `-run TestGenerator`; added suggest package dependencies not on main.\n- Setup improvements: ensure suggest package dependencies are merged before generator tasks.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:55:54.297733-08:00","updated_at":"2025-12-31T01:50:50.088505-08:00","closed_at":"2025-12-31T01:50:50.088505-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-wnh","depends_on_id":"markdowntown-cli-6sg","type":"blocks","created_at":"2025-12-30T23:59:27.167588-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wnh","depends_on_id":"markdowntown-cli-4uq","type":"blocks","created_at":"2025-12-30T23:59:32.512031-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-wnh","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:54.299767-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-5l5","title":"Core: tools list command","description":"- Implement `markdowntown tools list` command wired to registry.\n- Aggregate patterns into tool summaries (toolId/toolName/count/docs).\n- Output JSON array with deterministic ordering.\n\nAcceptance criteria:\n- `markdowntown tools list` returns JSON array sorted by toolId.\n- Uses registry loader and handles missing/invalid registry errors.\n\nEdge cases:\n- Multiple patterns per tool; duplicate docs list handling.\n\nRisks/assumptions:\n- Registry must be loaded before command runs.\n\n## Files\n- cmd/markdowntown/main.go (modify: add tools list command)\n- internal/scan/tools_list.go (create: build tool summary output)\n- internal/scan/registry.go (modify: expose loaded registry)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (see docs/cli-transcripts/markdowntown-cli-5l5/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-5l5/make-check.txt\n\n## Close Notes\n- Issues encountered: lint flagged unused runGit return value; adjusted helper signature.\n- Setup improvements: add lint target to CI so these issues surface earlier.\n- Debug info that would have helped: expected lint rules for unparam.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:56:40.343354-08:00","updated_at":"2025-12-30T17:06:16.47027-08:00","closed_at":"2025-12-30T17:06:16.47027-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-5l5","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:40.345078-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-5l5","depends_on_id":"markdowntown-cli-587","type":"blocks","created_at":"2025-12-30T16:01:35.367496-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-03q","title":"CLI: Audit flags, exit codes, md output","description":"Wire the corrected audit behavior into the CLI and add deterministic Markdown output.\n\n- Add/extend `markdowntown audit` command with flags: --fail-severity, --redact, --only, --exclude, --include-scan-warnings, --format json|md.\n- Implement exit code logic: 0 (below threshold), 1 (issues at/above threshold), 2 (fatal).\n- Support input modes: internal scan vs --input \u003cfile|-\u003e with schema validation and pass-through of scan metadata.\n- Add Markdown renderer with stable headings and ordering; no line-wrapping variability.\n- Ensure stdout/stderr behavior aligns with CLI guidance (output to stdout, progress/errors to stderr).\n\nAcceptance criteria:\n- CLI flags match spec and are documented in help/usage.\n- JSON and MD outputs are deterministic; `--compact` affects JSON only.\n- Exit codes follow the corrected spec.\n\nEdge cases:\n- --input with scan flags present should error.\n- --only + --exclude interactions (exclude wins).\n\n## Files\n- cmd/markdowntown/main.go (modify: audit command + flags + exit codes)\n- internal/audit/render_md.go (create: Markdown renderer)\n- internal/audit/options.go (create/modify: flag parsing + filters)\n\n## QA Evidence\n- CLI tests: `go test ./cmd/markdowntown -run TestAudit` (or equivalent)\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/go-test-cli.txt, docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:59:35.725734-08:00","updated_at":"2025-12-31T11:59:35.725734-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-03q","depends_on_id":"markdowntown-cli-50h","type":"parent-child","created_at":"2025-12-31T11:59:35.728801-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-03q","depends_on_id":"markdowntown-cli-q7v","type":"blocks","created_at":"2025-12-31T11:59:35.730044-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-03q","depends_on_id":"markdowntown-cli-uon","type":"blocks","created_at":"2025-12-31T11:59:35.731092-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-03q","depends_on_id":"markdowntown-cli-2fe","type":"blocks","created_at":"2025-12-31T11:59:35.732077-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-9vs","title":"Temp fields acc+design+assignee+estimate","description":"temp","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:55:16.816764-08:00","updated_at":"2025-12-31T10:00:45.588594-08:00","closed_at":"2025-12-31T10:00:45.588594-08:00","created_by":"honk"}
{"id":"markdowntown-cli-za8","title":"Infra: init Go module + CLI skeleton","description":"- Initialize Go module and baseline CLI entrypoint.\n- Add version constants and wire `--version` output formatting contract.\n- Create base package layout (`cmd/`, `internal/` scaffolding).\n\nAcceptance criteria:\n- `go.mod` targets Go 1.22+ and builds a minimal `markdowntown` binary.\n- `cmd/markdowntown/main.go` defines root command + subcommands stubs.\n- Version constants live in a dedicated package and are imported by CLI.\n\nEdge cases:\n- `--version` works without registry or git available.\n\nRisks/assumptions:\n- CLI framework is stdlib/cobra-like; keep light dependency footprint.\n- Module path assumed as `markdowntown-cli` until a canonical repo URL is provided.\n\n## Files\n- go.mod (create: module definition)\n- go.sum (create: dependency lockfile if needed)\n- cmd/markdowntown/main.go (create: CLI skeleton + version flag)\n- internal/version/version.go (create: version + schema constants)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `go test ./...` (see docs/cli-transcripts/markdowntown-cli-za8/go-test.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-za8/go-test.txt\n\n## Close Notes\n- Issues encountered: module path assumed as `markdowntown-cli` without canonical repo URL.\n- Setup improvements: define module import path and add git remote before pushing.\n- Debug info that would have helped: expected module path or repository URL.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:55:17.278846-08:00","updated_at":"2025-12-30T16:41:40.729286-08:00","closed_at":"2025-12-30T16:41:40.729286-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-za8","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:55:17.280798-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-za8","depends_on_id":"markdowntown-cli-4s8","type":"blocks","created_at":"2025-12-30T16:01:13.884133-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-a6q","title":"Testing: Audit CLI goldens + transcripts","description":"Add audit CLI integration tests, goldens, and transcripts.\n\nAcceptance criteria:\n- Golden fixtures cover JSON + Markdown audit output with deterministic ordering.\n- CLI integration tests validate exit codes for warnings/errors and stdin input.\n- Transcripts captured for audit command and CI.\n\nEdge cases:\n- Empty scan output, malformed scan JSON via stdin, and user-scope redaction.\n\n## Files\n- cmd/markdowntown/audit_integration_test.go (create: CLI tests)\n- testdata/golden/audit.json (create: golden JSON)\n- testdata/golden/audit.md (create: golden Markdown)\n- testdata/repos/audit/ (create: fixtures)\n- docs/cli-transcripts/markdowntown-cli-a6q/go-test-audit.txt (create: test transcript)\n- docs/cli-transcripts/markdowntown-cli-a6q/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CLI tests: `go test ./cmd/markdowntown -run TestAudit`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a6q/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a6q/make-test.txt`\n\n## QA Evidence (Run)\n- CLI tests: `go test ./cmd/markdowntown -run TestAudit`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a6q/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a6q/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:54:14.044113-08:00","updated_at":"2025-12-31T10:54:00.286677-08:00","closed_at":"2025-12-31T10:54:00.286677-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-a6q","depends_on_id":"markdowntown-cli-63x","type":"blocks","created_at":"2025-12-31T10:02:29.580878-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-a6q","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T09:59:57.941533-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-tan","title":"Core: scan command wiring + progress","description":"- Wire `markdowntown scan` command with all flags and output formatting.\n- Implement TTY-aware progress updates to stderr.\n- Support pretty vs compact JSON and trailing newline.\n\nAcceptance criteria:\n- `markdowntown scan` supports `--repo`, `--repo-only`, `--stdin`, `--include-content`, `--compact`, `--quiet`.\n- Progress output disabled when stdout not TTY or `--quiet`.\n- Exit codes align with spec (0 success w/ warnings, 1 fatal).\n\nEdge cases:\n- `--repo` points outside a git worktree.\n- Non-TTY stdout with stderr redirected.\n\nRisks/assumptions:\n- Terminal width detection is available on target OSes.\n\n## Files\n- cmd/markdowntown/main.go (modify: scan command + flags)\n- internal/scan/scanner.go (modify: integrate progress option)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-tan/make-check.txt\n\n## Close Notes\n- Issues encountered: revive flagged builtin names; renamed vars/params.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:58:46.485743-08:00","updated_at":"2025-12-30T18:00:49.451853-08:00","closed_at":"2025-12-30T18:00:49.451853-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-tan","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:58:46.488003-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-tan","depends_on_id":"markdowntown-cli-nx1","type":"blocks","created_at":"2025-12-30T16:02:12.89008-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-tan","depends_on_id":"markdowntown-cli-9bi","type":"blocks","created_at":"2025-12-30T16:02:18.258108-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-12r","title":"Docs: dev workflow follow-ups","description":"- Document git remote/tracking setup required for bd workflow.\n- Document preferred tooling for docs screenshot generation and fuzzing guidance.\n- Link the dev notes from README.\n\nAcceptance criteria:\n- README links to contributing/dev workflow notes.\n- Dev docs describe required git remote setup for bd push/pull.\n- Dev docs describe screenshot generation tooling and recommended fuzz duration.\n\nEdge cases:\n- Keep guidance shell-agnostic where possible.\n\nRisks/assumptions:\n- Tooling availability may differ across environments.\n\n## Files\n- README.md (modify: link to contributing/dev notes)\n- docs/CONTRIBUTING.md (create: dev workflow notes)\n- docs/USER_GUIDE.md (modify: link to fuzzing guidance if needed)\n- docs/scripts/render-scan-screenshot.py (create: screenshot generator)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-12r/make-check.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: documented remote setup and screenshot tooling in `docs/CONTRIBUTING.md`.\n- Debug info that would have helped: earlier mention of required remote/tracking setup.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T18:47:24.912099-08:00","updated_at":"2025-12-30T18:53:05.258566-08:00","closed_at":"2025-12-30T18:53:05.258566-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-12r","depends_on_id":"markdowntown-cli-fyg","type":"parent-child","created_at":"2025-12-30T18:47:24.913628-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-kol","title":"Docs: HTTPS-only fetcher test guidance","description":"Add developer guidance explaining that fetcher tests must use HTTPS-only servers.\n\nAcceptance criteria:\n- Contributing docs note that the fetcher rejects HTTP schemes.\n- Guidance tells test authors to use `httptest.NewTLSServer` and pass `server.Client()` when exercising fetcher logic.\n- CI passes.\n\n## Files\n- docs/CONTRIBUTING.md (modify: add HTTPS-only fetcher test note)\n- docs/cli-transcripts/markdowntown-cli-kol/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-kol/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T03:27:24.375921-08:00","updated_at":"2025-12-31T03:30:44.545271-08:00","closed_at":"2025-12-31T03:30:44.545271-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-kol","depends_on_id":"markdowntown-cli-zij","type":"parent-child","created_at":"2025-12-31T03:27:39.034538-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-0wq","title":"Core: XDG_CONFIG_HOME expansion for registry paths","description":"Add environment-variable expansion for registry paths so Copilot CLI configs can be discovered when XDG_CONFIG_HOME is set.\n\n- Extend path expansion to support $XDG_CONFIG_HOME and ${XDG_CONFIG_HOME} in registry paths before glob compilation.\n- If XDG_CONFIG_HOME is unset, leave the path untouched and ensure validation still passes.\n- Add unit tests for path expansion and matching with env set/unset.\n\nAcceptance criteria:\n- Patterns containing $XDG_CONFIG_HOME compile and match when env is set.\n- Existing ~ expansion behavior is unchanged.\n- Registry validation passes with new XDG patterns.\n\nEdge cases:\n- XDG_CONFIG_HOME is empty or relative.\n- XDG_CONFIG_HOME contains spaces.\n- Env var not set (pattern should not crash validation).\n\n## Files\n- internal/scan/registry.go (modify: add env var expansion helper)\n- internal/scan/matcher.go (modify: call env expansion during compile)\n- internal/scan/matcher_test.go (modify/create: tests for XDG expansion)\n\n## QA Evidence\n- Unit tests: `go test ./internal/scan -run Test.*XDG` (or equivalent)\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/go-test-scan.txt, docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:13:43.682093-08:00","updated_at":"2025-12-31T11:13:43.682093-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-0wq","depends_on_id":"markdowntown-cli-03u","type":"parent-child","created_at":"2025-12-31T11:13:43.684424-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-0wq","depends_on_id":"markdowntown-cli-lrj","type":"blocks","created_at":"2025-12-31T11:15:07.799753-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-5y6","title":"Tests: registry/cache/fetcher/snapshot","description":"- Add unit tests for source registry validation, XDG paths, metadata store, fetcher (robots/ETag), and WARC snapshot writer.\n- Use httptest servers to simulate conditional requests and robots.txt.\n\nAcceptance criteria:\n- Tests cover success + failure paths for registry, cache, fetcher, and WARC writer.\n- Deterministic test data in testdata/ where needed.\n\nEdge cases:\n- 304 responses, disallowed robots paths, malformed WARC records.\n\n## Files\n- internal/suggest/registry_test.go (modify: extend coverage)\n- internal/suggest/metadata_test.go (modify: extend coverage)\n- internal/suggest/fetcher_test.go (modify: extend coverage)\n- internal/suggest/warc_test.go (modify: extend coverage)\n- testdata/suggest/response.txt (create: fixture payload)\n- docs/cli-transcripts/markdowntown-cli-5y6/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-5y6/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestRegistry|TestFetcher|TestWARC`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-5y6/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-5y6/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: metadata/fetcher type naming conflict and redirect test adjustments resolved.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:56:23.658277-08:00","updated_at":"2025-12-31T01:34:31.630943-08:00","closed_at":"2025-12-31T01:34:31.630943-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-5y6","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:23.66023-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-5y6","depends_on_id":"markdowntown-cli-e9m","type":"blocks","created_at":"2025-12-30T23:59:48.543982-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-kuw","title":"Core: Document normalization (HTML/MD)","description":"- Normalize HTML/Markdown into structured sections with stable anchors.\n- Preserve span offsets for proof objects without exposing spans to users.\n- Ensure deterministic output across runs.\n\nAcceptance criteria:\n- Normalizer handles HTML + Markdown inputs deterministically.\n- Each section provides stable IDs for claim spans.\n- Tests cover typical doc structures and edge cases.\n\nEdge cases:\n- Nested headings, code blocks, inline code spans, malformed HTML.\n\n## Files\n- internal/suggest/normalize.go (create: HTML/MD normalization)\n- internal/suggest/normalize_test.go (create: normalization tests)\n- docs/cli-transcripts/markdowntown-cli-kuw/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-kuw/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestNormalize`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-kuw/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-kuw/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:54:26.150478-08:00","updated_at":"2025-12-31T01:24:22.20783-08:00","closed_at":"2025-12-31T01:24:22.20783-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-kuw","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:26.152297-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-kuw","depends_on_id":"markdowntown-cli-e9m","type":"blocks","created_at":"2025-12-30T23:58:49.851604-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-lta","title":"Infra: CI + goreleaser pipelines","description":"- Add GitHub Actions CI matrix for Go 1.22/1.23 across OS/arch.\n- Configure goreleaser + release workflow.\n- Enforce coverage threshold in CI.\n\nAcceptance criteria:\n- `.github/workflows/ci.yml` runs lint, test (with coverage), build matrix.\n- `.github/workflows/release.yml` triggers goreleaser on tags.\n- `.goreleaser.yml` builds cross-platform artifacts.\n\nEdge cases:\n- Windows path handling in CI steps.\n- Ensure `golangci-lint` install works on all OSes.\n\nRisks/assumptions:\n- GitHub Actions runners have required tooling.\n\n## Files\n- .github/workflows/ci.yml (create: CI matrix)\n- .github/workflows/release.yml (create: release pipeline)\n- .goreleaser.yml (create: goreleaser config)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-lta/make-check.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: configure `origin` remote/tracking branch so pulls/pushes work.\n- Debug info that would have helped: note expected remote setup in repo onboarding docs.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:56:01.093397-08:00","updated_at":"2025-12-30T18:33:06.254288-08:00","closed_at":"2025-12-30T18:33:06.254288-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-lta","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:01.095379-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-lta","depends_on_id":"markdowntown-cli-0xn","type":"blocks","created_at":"2025-12-30T16:01:24.642185-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-edi","title":"Tests: CLI integration + transcripts","description":"- Add integration tests for `suggest`, `resolve`, and `audit` with golden JSON/Markdown outputs.\n- Capture command transcripts (stdout/stderr + exit codes) for QA evidence.\n- Verify non-interactive behavior and piped stdin where applicable.\n- Validate non-zero exit code for unknown client paths.\n\nAcceptance criteria:\n- Golden tests cover JSON and Markdown output modes.\n- Transcripts are recorded in docs/cli-transcripts.\n- Exit codes are validated for unknown client failures.\n- CI passes for the CLI integration suite.\n\nEdge cases:\n- Offline mode with stale cache, unknown client, missing repo root.\n\n## Files\n- cmd/markdowntown/cli_integration_test.go (create: integration tests + exit code case)\n- testdata/golden/suggest.json (create: golden output)\n- testdata/golden/suggest.md (create: golden output)\n- testdata/golden/resolve.json (create: golden output)\n- docs/cli-transcripts/suggest-cli/suggest-offline.txt (create: CLI transcript)\n- docs/cli-transcripts/suggest-cli/audit-offline.txt (create: CLI transcript)\n- docs/cli-transcripts/suggest-cli/resolve-codex.txt (create: CLI transcript)\n- docs/cli-transcripts/markdowntown-cli-edi/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-edi/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CLI tests: `go test ./cmd/markdowntown -run TestSuggestCLI`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-edi/go-test.txt` (exit 0)\n- Non-interactive: `docs/cli-transcripts/suggest-cli/*.txt` (piped stdin, exit 0)\n- Exit codes: `TestSuggestCLIUnknownClientExitCode` validates non-zero exit\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-edi/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: git push blocked by GITHUB_TOKEN; required `GITHUB_TOKEN=` for push with gh credentials. macOS /private prefix required normalization for resolve golden output.\n- Setup improvements: note GITHUB_TOKEN override when pushing; keep /private path normalization in integration tests for macOS.\n- Debug info that would have helped: none.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:56:54.777127-08:00","updated_at":"2025-12-31T02:34:16.133566-08:00","closed_at":"2025-12-31T02:34:16.133566-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-edi","depends_on_id":"markdowntown-cli-mpg","type":"blocks","created_at":"2025-12-31T00:00:04.547904-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-edi","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:54.778995-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-2fe","title":"Core: Audit rule set corrections","description":"Implement the corrected audit rule set and conflict fallback grouping.\n\n- MD001 conflict: group configs by (scope, toolId, kind) and emit conflicts when \u003e1, excluding known override pairs; if scan warnings include conflict details, prefer them.\n- MD002 gitignored repo config (repo scope only).\n- MD003 invalid frontmatter with stable message; raw error in evidence.\n- MD004 empty config when warning==\"empty\" OR sizeBytes==0.\n- MD005 info-only: no repo config but user/global exists, per toolId+kind; include detected paths and candidate repo paths.\n- MD006 unreadable: merge EACCES/ENOENT/ERROR into one rule; severity error for repo scope, warning for user/global.\n- Drop MD008 from v1.\n\nAcceptance criteria:\n- Rules emit deterministic issues per spec and do not require scan schema changes.\n- Conflict grouping excludes override pairs and respects scan warnings if present.\n\nEdge cases:\n- A file matches multiple tools: issue lists all tools.\n- Mixed scopes in scan input; MD005 only evaluates available scopes.\n\n## Files\n- internal/audit/rules.go (create/modify: rule logic)\n- internal/audit/rule_helpers.go (create/modify: grouping + candidate paths)\n\n## QA Evidence\n- Unit tests: `go test ./internal/audit -run TestRules` (or equivalent)\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/go-test-audit.txt, docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:59:13.78806-08:00","updated_at":"2025-12-31T11:59:13.78806-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-2fe","depends_on_id":"markdowntown-cli-50h","type":"parent-child","created_at":"2025-12-31T11:59:13.78994-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-2fe","depends_on_id":"markdowntown-cli-q7v","type":"blocks","created_at":"2025-12-31T11:59:13.791312-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-2fe","depends_on_id":"markdowntown-cli-uon","type":"blocks","created_at":"2025-12-31T11:59:13.7925-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-shp","title":"Infra: Cache layout + metadata store","description":"- Implement XDG-based path resolution for config/cache/data roots.\n- Add metadata store for source fetch state (ETag, Last-Modified, last_verified_at, hash IDs).\n- Document pruning/retention expectations for cache.\n\nAcceptance criteria:\n- XDG path resolver covers config, cache, and data roots with tests.\n- Metadata read/write is deterministic and tolerant of partial data.\n- Metadata schema versioning is defined.\n\nEdge cases:\n- Missing directories, read-only cache, corrupted metadata file.\n\n## Files\n- internal/suggest/paths.go (create: XDG path resolver)\n- internal/suggest/metadata.go (create: metadata store)\n- internal/suggest/metadata_test.go (create: metadata tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestMetadata`\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-shp/go-test.txt`, `docs/cli-transcripts/markdowntown-cli-shp/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider documenting metadata file location in user guide.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:53:41.555765-08:00","updated_at":"2025-12-31T00:27:34.029209-08:00","closed_at":"2025-12-31T00:27:34.029209-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-shp","depends_on_id":"markdowntown-cli-76j","type":"blocks","created_at":"2025-12-30T23:58:23.204876-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-shp","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:41.557727-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-zxd","title":"Core: HTTP fetcher (robots + conditional GET)","description":"- Implement fetcher that honors robots.txt and uses conditional requests (ETag/If-None-Match, Last-Modified/If-Modified-Since).\n- Bound discovery using sitemap when available; enforce allowlisted hosts from source registry.\n- Persist fetch results into metadata store for reuse.\n\nAcceptance criteria:\n- Fetcher skips disallowed paths per robots.txt and records skip reasons.\n- Conditional requests reuse cached content on 304 responses.\n- Host allowlist enforced; unknown hosts rejected with clear errors.\n\nEdge cases:\n- robots.txt missing/unreachable, 429/5xx responses, redirects to non-allowlisted domains.\n\n## Files\n- internal/suggest/fetcher.go (create: HTTP fetcher)\n- internal/suggest/robots.go (create: robots parsing)\n- internal/suggest/sitemap.go (create: sitemap discovery)\n- internal/suggest/fetcher_test.go (create: httptest coverage)\n- docs/cli-transcripts/markdowntown-cli-zxd/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-zxd/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestFetcher`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-zxd/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-zxd/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:53:55.032751-08:00","updated_at":"2025-12-31T00:47:29.276459-08:00","closed_at":"2025-12-31T00:47:29.276459-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-zxd","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:55.034835-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-zxd","depends_on_id":"markdowntown-cli-72e","type":"blocks","created_at":"2025-12-30T23:58:28.529079-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-zxd","depends_on_id":"markdowntown-cli-shp","type":"blocks","created_at":"2025-12-30T23:58:33.860367-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-kan","title":"Design: Audit schema + rule catalog","description":"Define the audit/report contract, schema, and rule taxonomy for the new `audit` command.\n\nAcceptance criteria:\n- Audit output schema is documented with versioning, severity levels, deterministic ordering rules, and exit-code mapping.\n- CLI contract includes `audit` flags, stdin/input behavior, and output formats (JSON/MD).\n- Rule catalog lists v1 rules (metadata-only) and explicitly states content-read policy and privacy/redaction rules.\n- Confirms how to handle VS Code instruction ordering ambiguity (fail-closed) and Copilot CLI config scope.\n\nEdge cases:\n- Empty scans, repo-only vs user-scope audits, malformed scan JSON, and order-ambiguous instruction types.\n\n## Files\n- docs/audit-spec-v1.md (create: audit contract + schema)\n- docs/architecture/audit.md (create: pipeline, rule engine, ordering, redaction model)\n- docs/cli-transcripts/markdowntown-cli-kan/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-kan/make-test.txt`\n\n## QA Evidence (Run)\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-kan/make-test.txt`\n\n## Close Notes\n- Issues encountered: initial transcript run failed due to missing folder; created it and re-ran.\n- Setup improvements: consider pre-creating transcript directories in task templates.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:53:04.483303-08:00","updated_at":"2025-12-31T10:13:46.646275-08:00","closed_at":"2025-12-31T10:13:46.646275-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-kan","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T09:58:18.564009-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-7co","title":"Testing: Shared adapter test helpers","description":"- Create shared adapter test helpers to avoid duplicate helper names across tests.\n- Update adapter tests to use the shared helper functions.\n- Align suggest fetcher tests with HTTPS-only fetcher behavior.\n\nAcceptance criteria:\n- Shared helper lives in a common test utility file.\n- Adapter tests compile without duplicate helper definitions.\n- CI passes.\n\n## Files\n- internal/instructions/test_helpers_test.go (create: shared helpers for test file writing)\n- internal/instructions/codex_test.go (modify: use shared helpers)\n- internal/instructions/copilot_test.go (modify: use shared helpers)\n- internal/instructions/claude_test.go (modify: use shared helpers with file mode)\n- internal/instructions/gemini_test.go (modify: use shared helpers)\n- internal/suggest/fetcher_test.go (modify: use TLS test server + client)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run 'Test.*Adapter'`\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-7co/go-test-adapters.txt`, `docs/cli-transcripts/markdowntown-cli-7co/make-test.txt`\n\n## Close Notes\n- Issues encountered: `make test` failed because fetcher tests used HTTP while the fetcher requires HTTPS; updated tests to use TLS servers + client.\n- Setup improvements: Add a short note in suggest test guidance about the HTTPS-only fetcher expectation.\n- Debug info that would have helped: A reminder that fetcher rejects HTTP schemes would have saved time.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T02:54:22.18306-08:00","updated_at":"2025-12-31T03:24:28.376003-08:00","closed_at":"2025-12-31T03:24:28.376003-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-7co","depends_on_id":"markdowntown-cli-q31","type":"parent-child","created_at":"2025-12-31T02:54:22.184956-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-5k7","title":"Docs: Offline transcript env var guidance","description":"Clarify offline transcript instructions so evidence runs stay reproducible.\n\nAcceptance criteria:\n- Suggest transcript README documents `MARKDOWNTOWN_SOURCES`, `XDG_DATA_HOME`, and `XDG_CACHE_HOME` usage.\n- Guidance clarifies that offline transcripts should show the env vars inline.\n- CI passes.\n\n## Files\n- docs/cli-transcripts/suggest-cli/README.md (modify: add env var guidance)\n- docs/cli-transcripts/suggest-cli/cli-commands.txt (create: offline transcript example)\n- docs/cli-transcripts/markdowntown-cli-5k7/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-5k7/make-test.txt`\n\n## Close Notes\n- Issues encountered: suggest-cli transcript folder was missing on main; recreated it with the existing offline example.\n- Setup improvements: none.\n- Debug info that would have helped: none.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T03:27:50.818098-08:00","updated_at":"2025-12-31T03:33:24.117462-08:00","closed_at":"2025-12-31T03:33:24.117462-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-5k7","depends_on_id":"markdowntown-cli-zij","type":"parent-child","created_at":"2025-12-31T03:27:59.394715-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-8bo","title":"Epic: Audit report layer (VS Code + Copilot CLI)","description":"Complete implementation of the audit/report layer that turns scan results into actionable, deterministic suggestions (starting with VS Code + Copilot CLI concerns).\n\n## Objective\nAdd a correctness-first `audit` command that analyzes scan output (repo + user scopes) and emits stable JSON/Markdown issues with clear remediation guidance, while respecting privacy and non-interactive CLI conventions.\n\n## Success Criteria\n- [ ] `markdowntown audit` emits deterministic issues with stable IDs, severity, and ordering.\n- [ ] Audit rules cover v1 metadata-only checks (missing instructions, empty files, frontmatter errors, gitignored configs, required settings hints).\n- [ ] VS Code instruction file types and Copilot CLI config/agent patterns are reflected in the registry and audit logic.\n- [ ] JSON/Markdown output formats are documented and validated; stdout/stderr behavior and exit codes are explicit.\n- [ ] CI remains green; transcripts captured for CLI + tests.\n\n## QA Evidence Requirements\n- CLI integration coverage for `audit`\n- Command transcripts (stdout/stderr + exit codes)\n- Non-interactive verification (stdin/pipe input)\n- Output formats validated (`--format json|md`, `--json`)\n- Config precedence + location verified (XDG where applicable)\n- CI green proof\n\n## Risks/Assumptions\n- VS Code custom instruction ordering across file types is undefined; audit must fail-closed on conflicts.\n- Copilot CLI config lives in user scope; audit output must avoid leaking sensitive content.\n- Audit is metadata-first; content reads only when explicitly required by a rule.\n- Registry updates are needed to capture Copilot CLI config/agents.\n\n## Out of Scope\n- LLM-based suggestions or semantic content analysis\n- Auto-fix or file mutation\n- Telemetry/analytics\n\n## Sources\n- https://code.visualstudio.com/docs/copilot/customization/custom-instructions\n- https://docs.github.com/en/copilot/how-tos/use-copilot-agents/use-copilot-cli\n- https://docs.github.com/en/copilot/how-tos/use-copilot-agents/use-copilot-cli#configuration\n- https://clig.dev/#output\n- https://clig.dev/#exit-codes","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-31T09:49:14.659477-08:00","updated_at":"2025-12-31T09:49:14.659477-08:00","created_by":"honk"}
{"id":"markdowntown-cli-ipp","title":"Docs: README + user guide + screenshots","description":"- Write README + user guide for CLI usage and flags.\n- Document Codex CLI niceties (`/init`, `/prompts`, `/skills`) and registry locations.\n- Capture CLI screenshot(s) for docs.\n\nAcceptance criteria:\n- README includes install + usage examples for scan/registry/tools.\n- `docs/USER_GUIDE.md` covers flags, output schema, and examples.\n- Screenshots live under `docs/screenshots/scan-cli/`.\n\nEdge cases:\n- Keep examples deterministic (no timestamps or paths that vary).\n\nRisks/assumptions:\n- CLI output may shift until final implementation.\n\n## Files\n- README.md (create: usage + examples)\n- docs/USER_GUIDE.md (create: detailed user guide)\n- docs/screenshots/scan-cli/scan-output.png (create: CLI screenshot)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: docs/screenshots/scan-cli/scan-output.png\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-ipp/make-check.txt\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured; `python` is not available (used `python3`).\n- Setup improvements: configure `origin` remote/tracking branch; document preferred tooling for generating docs screenshots.\n- Debug info that would have helped: expected screenshot generation tooling or helper script.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T16:00:34.359646-08:00","updated_at":"2025-12-30T18:41:22.086542-08:00","closed_at":"2025-12-30T18:41:22.086542-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-ipp","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T16:00:34.361618-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-ipp","depends_on_id":"markdowntown-cli-tan","type":"blocks","created_at":"2025-12-30T16:03:11.931378-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-zij","title":"Epic: Evidence-only CLI improvements","description":"Follow-ups from the evidence-only CLI rollout close notes.\n\n## Objective\nDocument HTTPS-only fetcher expectations and keep offline transcript guidance aligned with required env vars.\n\n## Success Criteria\n- [x] Dev docs call out HTTPS-only fetcher expectations for tests.\n- [x] Suggest transcript guidance includes MARKDOWNTOWN_SOURCES + XDG paths.\n\n## QA Evidence Requirements\n- Docs updated with references to the expectations.\n- CI green proof.\n\n## Risks/Assumptions\n- Doc-only changes; no runtime behavior change.\n\n## Out of Scope\n- New CLI features\n- Adapter changes\n\n## Close Notes\n- Issues encountered: suggest-cli transcript folder was missing on main; recreated it with the offline example.\n- Setup improvements: none.\n- Debug info that would have helped: none.","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-31T03:26:51.191262-08:00","updated_at":"2025-12-31T03:34:12.984692-08:00","closed_at":"2025-12-31T03:34:12.984692-08:00","created_by":"honk"}
{"id":"markdowntown-cli-9bi","title":"Core: registry validate command","description":"- Implement `markdowntown registry validate` command.\n- Validate JSON syntax/schema, pattern compilation, unique IDs, and docs reachability.\n- Emit JSON report with pass/fail details per check.\n\nAcceptance criteria:\n- Validation errors include full pattern dump on malformed entries.\n- Docs reachability follows redirects and reports non-2xx.\n- Output JSON matches spec with checks breakdown.\n\nEdge cases:\n- Multiple registries detected (fail fast).\n- Timeouts or network errors for doc checks.\n\nRisks/assumptions:\n- Network access allowed only for validate command.\n\n## Files\n- cmd/markdowntown/main.go (modify: add registry validate command)\n- internal/scan/registry_validate.go (create: validation logic)\n- internal/scan/registry.go (modify: expose raw registry + errors)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (see docs/cli-transcripts/markdowntown-cli-9bi/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-9bi/make-check.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider making docs reachability timeout configurable.\n- Debug info that would have helped: expected HTTP method for docs reachability checks.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:56:59.832058-08:00","updated_at":"2025-12-30T17:13:57.310726-08:00","closed_at":"2025-12-30T17:13:57.310726-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-9bi","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:59.8338-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-9bi","depends_on_id":"markdowntown-cli-5l5","type":"blocks","created_at":"2025-12-30T16:01:40.739505-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-q31","title":"Epic: Evidence-only CLI follow-ups","description":"Follow-up improvements identified during the evidence-only CLI rollout.\n\n## Objective\nAddress documentation gaps, offline caching behavior, and test helper cleanup surfaced in task close notes.\n\n## Success Criteria\n- [x] Source registry schema and cache/metadata locations are documented.\n- [x] Offline mode uses a persistent cache + metadata store.\n- [x] Adapter tests share common helpers to avoid duplication.\n\n## Out of Scope\n- New client adapters\n- UI changes\n- Telemetry\n\n## Close Notes\n- Issues encountered: fetcher tests required HTTPS-only server adjustments; queued doc follow-up in markdowntown-cli-zij.\n- Setup improvements: created a follow-up improvements epic for doc guidance updates.\n- Debug info that would have helped: none.","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-31T02:53:00.096674-08:00","updated_at":"2025-12-31T03:28:48.337666-08:00","closed_at":"2025-12-31T03:28:48.337666-08:00","created_by":"honk"}
{"id":"markdowntown-cli-him","title":"Testing/Security: VS Code + Copilot CLI pattern coverage","description":"Add tests/fixtures to validate new VS Code + Copilot CLI patterns and guard against false positives in .github.\n\n- Add matcher tests that load the real registry and assert:\n  - Positive matches for .github/copilot-instructions.md, .github/copilot-instructions/**.instructions.md, .github/agents/*.md, AGENTS.md.\n  - Positive matches for ~/.copilot/config.json and ~/.copilot/mcp-config.json (and XDG paths when env set).\n  - Positive matches for VS Code prompt files in user profile prompts folder.\n  - Negative matches for .github/workflows/*.yml, .github/actions/**, and unrelated *.md.\n- If golden fixtures are used, add a small fixture repo under testdata/repos/ to cover new patterns and refresh golden output.\n\nAcceptance criteria:\n- New unit tests cover positive + negative cases for added patterns.\n- Golden outputs updated if fixtures change.\n- CI passes.\n\nEdge cases:\n- XDG_CONFIG_HOME set to custom location during tests.\n- Symlinked .github entries should not expand scan scope.\n\n## Files\n- internal/scan/matcher_test.go (modify: add registry-backed match tests)\n- internal/scan/registry_test.go (modify or add helper to load registry)\n- testdata/repos/\u003cnew-fixture\u003e (create: minimal .github + copilot files)\n- testdata/golden/scan.json (modify if fixture-based test added)\n\n## QA Evidence\n- Unit tests: `go test ./internal/scan -run TestRegistryPatterns` (or equivalent)\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/go-test-scan.txt, docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:14:20.739724-08:00","updated_at":"2025-12-31T11:14:34.192688-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-him","depends_on_id":"markdowntown-cli-03u","type":"parent-child","created_at":"2025-12-31T11:14:20.741977-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-him","depends_on_id":"markdowntown-cli-0wq","type":"blocks","created_at":"2025-12-31T11:15:34.9869-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-him","depends_on_id":"markdowntown-cli-29z","type":"blocks","created_at":"2025-12-31T11:15:43.987271-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-tkw","title":"Docs: README + USER_GUIDE + help text","description":"- Update README and USER_GUIDE with new commands, flags, and output examples.\n- Document config/cache locations, refresh behavior, and fail-closed evidence policy.\n- Add packaging/uninstall guidance (brew + go install).\n- Add transcript notes for CLI evidence.\n\nAcceptance criteria:\n- README and USER_GUIDE include `suggest`, `resolve`, and `audit` usage.\n- Output examples show source-linked suggestions.\n- Packaging/uninstall steps are documented.\n- CI passes.\n\nEdge cases:\n- Clarify offline behavior and stale-cache warnings.\n\n## Files\n- README.md (modify: new commands, evidence policy, config/cache, install/uninstall)\n- docs/USER_GUIDE.md (modify: suggest/resolve/audit docs + output examples)\n- docs/cli-transcripts/suggest-cli/README.md (create: transcript notes)\n- docs/cli-transcripts/markdowntown-cli-tkw/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-tkw/make-test.txt` (exit 0)\n- Docs reviewed for accuracy vs CLI flags\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: clarify in future docs once on-disk caching lands (offline currently returns warnings without cache).\n- Debug info that would have helped: none.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:57:08.047669-08:00","updated_at":"2025-12-31T02:43:23.603468-08:00","closed_at":"2025-12-31T02:43:23.603468-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-tkw","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:57:08.049298-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-tkw","depends_on_id":"markdowntown-cli-mpg","type":"blocks","created_at":"2025-12-31T00:00:09.990225-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-ixm","title":"Registry: VS Code + Copilot CLI patterns","description":"Expand the registry to cover VS Code/Copilot CLI-specific config and agent locations.\n\nAcceptance criteria:\n- Registry includes Copilot CLI config at `~/.copilot/config.json` (user scope).\n- Registry includes Copilot CLI custom agents in `.github/agents/*.md` (repo) and `~/.copilot/agents/*.md` (user).\n- Registry includes VS Code/Copilot `AGENTS.md` as instructions (repo scope) with load behavior matching nearest-ancestor semantics.\n- `make test` passes and tools list reflects new tool IDs where applicable.\n\nEdge cases:\n- Multi-tool file matches (AGENTS.md for Codex + Copilot) should appear as one config entry with multiple tools.\n\n## Files\n- data/ai-config-patterns.json (modify: add Copilot CLI + VS Code instruction patterns)\n- docs/cli-transcripts/markdowntown-cli-ixm/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-ixm/make-test.txt`\n\n## QA Evidence (Run)\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-ixm/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:53:16.195045-08:00","updated_at":"2025-12-31T10:30:06.159442-08:00","closed_at":"2025-12-31T10:30:06.159442-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-ixm","depends_on_id":"markdowntown-cli-kan","type":"blocks","created_at":"2025-12-31T10:01:02.741214-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-ixm","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T09:58:35.257837-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-29z","title":"Registry: VS Code + Copilot CLI patterns + hints","description":"Update the registry to cover VS Code + Copilot CLI discovery additions and settings hints.\n\n- Add Copilot CLI instruction patterns:\n  - .github/copilot-instructions.md (repo-wide instructions)\n  - .github/copilot-instructions/**/*.instructions.md (path-specific instructions)\n  - AGENTS.md (repo instructions)\n- Add Copilot CLI config patterns:\n  - ~/.copilot/config.json (existing) and ~/.copilot/mcp-config.json (new)\n  - $XDG_CONFIG_HOME/copilot/config.json and $XDG_CONFIG_HOME/copilot/mcp-config.json (new)\n- Add VS Code user profile prompt files:\n  - ~/.config/Code/User/prompts/*.prompt.md\n  - ~/.config/Code/User/profiles/*/prompts/*.prompt.md (if supported)\n- Add settings hints where applicable:\n  - github.copilot.chat.codeGeneration.useInstructionFiles\n  - chat.useAgentsMdFile\n  - chat.useNestedAgentsMdFiles\n- Keep patterns precise (no broad .github/** globs).\n\nAcceptance criteria:\n- data/ai-config-patterns.json contains unique IDs, correct toolId/kind/scope/loadBehavior/application values.\n- All new patterns include docs URLs and settings hints where relevant.\n- markdowntown registry validate passes.\n\nEdge cases:\n- Avoid overlapping globs that cause false positives in .github/workflows.\n- Ensure XDG-based paths are optional and only match when env expansion is supported.\n\n## Files\n- data/ai-config-patterns.json (modify: add VS Code + Copilot CLI patterns and hints)\n\n## QA Evidence\n- Registry validation: `go run ./cmd/markdowntown registry validate` (or built binary)\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/registry-validate.txt, docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:14:03.367418-08:00","updated_at":"2025-12-31T11:14:03.367418-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-29z","depends_on_id":"markdowntown-cli-lrj","type":"blocks","created_at":"2025-12-31T11:15:16.262571-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-29z","depends_on_id":"markdowntown-cli-0wq","type":"blocks","created_at":"2025-12-31T11:15:25.109063-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-29z","depends_on_id":"markdowntown-cli-03u","type":"parent-child","created_at":"2025-12-31T11:14:03.369632-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-587","title":"Core: registry loader + matcher + types","description":"- Implement registry loader with XDG lookup, env override, and ambiguity errors.\n- Add schema types for patterns, tools, and output structs (with JSON tags).\n- Implement case-insensitive glob/regex matcher and pattern compilation.\n\nAcceptance criteria:\n- Registry load order honors XDG + binary-adjacent path and fails on multiple registries.\n- Matcher supports glob + regex with case-insensitive matching.\n- Pattern structs cover required fields and are reused across commands.\n\nEdge cases:\n- Malformed regex/glob compile errors.\n- `~` expansion and OS path separators.\n\nRisks/assumptions:\n- Glob `**` support uses doublestar v4.\n\n## Files\n- internal/scan/registry.go (create: registry loading)\n- internal/scan/matcher.go (create: glob/regex matching)\n- internal/scan/types.go (create: registry + output types)\n- data/ai-config-patterns.json (modify: align with schema if needed)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `go test ./...` (see docs/cli-transcripts/markdowntown-cli-587/go-test.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-587/go-test.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider documenting the registry filename and XDG path defaults in CONTRIBUTING.\n- Debug info that would have helped: expected registry file name near the binary.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:56:21.53001-08:00","updated_at":"2025-12-30T16:48:23.349756-08:00","closed_at":"2025-12-30T16:48:23.349756-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-587","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:56:21.531981-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-587","depends_on_id":"markdowntown-cli-za8","type":"blocks","created_at":"2025-12-30T16:01:30.011664-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-fyg","title":"Epic: scan v1 follow-up improvements","description":"Follow-up improvements based on scan v1 close notes.\n\n## Objective\nCapture and address workflow/documentation gaps discovered during scan v1 delivery.\n\n## Success Criteria\n- [x] Dev docs cover git remote/tracking setup for the bd workflow.\n- [x] Docs call out required tooling for docs screenshots and fuzzing guidance.\n- [x] Updates are linked from README or contributing docs.\n\n## QA Evidence Requirements\n- Playwright coverage for UI flows (N/A for CLI-only)\n- Screenshots stored in docs (N/A for CLI-only)\n- DevTools MCP checks (N/A for CLI-only)\n- FE/BE logs reviewed (N/A for CLI-only)\n- CI green proof (commands recorded in each task)\n\n## Risks/Assumptions\n- Improvements are doc-only and do not change CLI behavior.\n\n## Out of Scope\n- Feature work beyond documentation and workflow guidance\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured.\n- Setup improvements: dev workflow notes now live in `docs/CONTRIBUTING.md`.\n- Debug info that would have helped: earlier mention of remote setup in repo onboarding.","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-30T18:47:03.484431-08:00","updated_at":"2025-12-30T18:54:17.380744-08:00","closed_at":"2025-12-30T18:54:17.380744-08:00","created_by":"honk"}
{"id":"markdowntown-cli-54c","title":"Core: Gemini adapter","description":"- Implement Gemini adapter: global + ancestor + subtree scan; respect .gitignore and .geminiignore; configurable context file names.\n- Record concatenation order and applied files for audit.\n\nAcceptance criteria:\n- Adapter scans ancestors to repo root and subdirectories below cwd.\n- `.gitignore` and `.geminiignore` rules are honored.\n- Tests cover ancestor/subtree behavior and file name configuration.\n\nEdge cases:\n- Multiple context filenames configured, ignored files under nested directories.\n\n## Files\n- internal/instructions/gemini.go (create: Gemini adapter)\n- internal/instructions/gemini_test.go (create: Gemini adapter tests)\n- internal/instructions/adapter.go (add: adapter interface base)\n- internal/instructions/codex.go (add: shared path helpers)\n- internal/instructions/helpers.go (add: instruction file utilities)\n- docs/cli-transcripts/markdowntown-cli-54c/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-54c/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestGeminiAdapter`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-54c/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-54c/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: adapter scaffolding helpers not on main; copied base adapter/helpers into branch.\n- Setup improvements: merge adapter scaffolding before adding new client adapters.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:55:41.082541-08:00","updated_at":"2025-12-31T01:58:28.924779-08:00","closed_at":"2025-12-31T01:58:28.924779-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-54c","depends_on_id":"markdowntown-cli-083","type":"blocks","created_at":"2025-12-30T23:59:21.828176-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-54c","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:41.084262-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-a36","title":"Core: Audit rule implementations (v1)","description":"Implement the v1 deterministic audit rule set (metadata-only).\n\nAcceptance criteria:\n- Rules include: missing instructions for tools with configs, `frontmatterError`, empty file warning, gitignored configs, and `requires-setting` hints.\n- Rules output stable `ruleId`, `severity`, `message`, `suggestion`, and `paths`.\n- Rules avoid reading file contents unless explicitly required by the spec.\n\nEdge cases:\n- Multi-tool configs, multiple scopes, and configs with read errors should not crash rules.\n\n## Files\n- internal/audit/rules.go (create: rule implementations)\n- internal/audit/rules_test.go (create: rule fixtures + assertions)\n- internal/audit/rule_helpers.go (create: helper utilities)\n- docs/cli-transcripts/markdowntown-cli-a36/go-test-audit.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-a36/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/audit -run TestRules`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a36/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a36/make-test.txt`\n\n## QA Evidence (Run)\n- Unit tests: `go test ./internal/audit -run TestRules`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a36/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-a36/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:53:52.866403-08:00","updated_at":"2025-12-31T10:36:35.900963-08:00","closed_at":"2025-12-31T10:36:35.900963-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-a36","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T09:59:23.123869-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-a36","depends_on_id":"markdowntown-cli-fsd","type":"blocks","created_at":"2025-12-31T10:01:37.885914-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-a36","depends_on_id":"markdowntown-cli-ixm","type":"blocks","created_at":"2025-12-31T10:01:47.438433-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-iun","title":"Core: content pipeline (hashing + frontmatter)","description":"- Implement SHA256 hashing and binary detection for scanned files.\n- Parse YAML frontmatter on all files, store frontmatter or parse errors.\n- Populate sizeBytes/sha256/content/contentSkipped fields per spec.\n\nAcceptance criteria:\n- Hashing runs for all files (even large), using raw bytes.\n- Binary files set `contentSkipped: \"binary\"` and `content: null`.\n- Frontmatter parsed on all files with errors captured.\n\nEdge cases:\n- Empty files (warning: \"empty\").\n- Unreadable files (sizeBytes/sha256 null + error code).\n\nRisks/assumptions:\n- No size limit; memory usage should be monitored.\n\n## Files\n- internal/hash/sha256.go (create: hashing helper)\n- internal/scan/frontmatter.go (create: YAML frontmatter parser)\n- internal/scan/scanner.go (modify: integrate content pipeline)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-iun/make-check.txt\n\n## Close Notes\n- Issues encountered: gosec G304 required #nosec; revive required error return order and unused param cleanup.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:58:03.626607-08:00","updated_at":"2025-12-30T17:46:56.564173-08:00","closed_at":"2025-12-30T17:46:56.564173-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-iun","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:58:03.62882-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-iun","depends_on_id":"markdowntown-cli-a05","type":"blocks","created_at":"2025-12-30T16:02:02.190993-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-jgp","title":"Docs: Audit spec + CLI updates","description":"Update user-facing docs to reflect the corrected audit schema, flags, redaction, and exit codes.\n\n- README: update audit highlights, exit codes, and redaction description; note markdown output and filters.\n- USER_GUIDE: update audit schema fields (audit/sourceScan provenance, registryVersionUsed), redaction placeholders, scanWarnings opt-in, rule list changes, and CLI flags.\n\nAcceptance criteria:\n- README and USER_GUIDE match the corrected audit spec and CLI flags.\n- Examples use `--format md` and `--fail-severity` where appropriate.\n\nEdge cases:\n- Avoid implying scan schema semver.\n- Avoid implying raw user paths are ever emitted by default.\n\n## Files\n- README.md (modify: audit highlights + exit codes + flags)\n- docs/USER_GUIDE.md (modify: audit schema + flags + examples)\n\n## QA Evidence\n- Docs review complete\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T12:00:24.837338-08:00","updated_at":"2025-12-31T12:00:24.837338-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-jgp","depends_on_id":"markdowntown-cli-q7v","type":"blocks","created_at":"2025-12-31T12:00:24.840639-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-jgp","depends_on_id":"markdowntown-cli-03q","type":"blocks","created_at":"2025-12-31T12:00:24.841729-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-jgp","depends_on_id":"markdowntown-cli-50h","type":"parent-child","created_at":"2025-12-31T12:00:24.839211-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-mpg","title":"CLI: suggest/resolve/audit commands","description":"- Add CLI subcommands: `suggest`, `resolve`, `audit` with flags for client selection, format, refresh/offline, and explain.\n- Ensure stdout/stderr separation and deterministic exit codes.\n- Wire output formatting for JSON/Markdown and `--json` schema.\n\nAcceptance criteria:\n- Commands parse flags and return stable output with non-interactive behavior.\n- `suggest` emits evidence-backed output; `resolve` shows effective instruction chain; `audit` reports conflicts/omissions.\n- Exit codes align with spec; errors printed to stderr only.\n\nEdge cases:\n- Unknown client, no repo root, offline cache stale, format mismatch.\n\n## Files\n- cmd/markdowntown/main.go (modify: add suggest/resolve/audit commands)\n- cmd/markdowntown/suggest.go (create: command handlers + suggest pipeline)\n- cmd/markdowntown/suggest_test.go (create: TestSuggestCLI)\n- internal/suggest/output.go (create: JSON/MD rendering)\n- internal/suggest/report.go (create: report structs for suggest/audit/resolve)\n- internal/suggest/claims.go (add: claim model)\n- internal/suggest/conflict.go (add: conflict detection)\n- internal/suggest/normalize.go (add: doc normalization)\n- internal/suggest/registry.go (add: source registry)\n- internal/suggest/paths.go (add: XDG helpers)\n- internal/suggest/generator.go (add: suggestion generator)\n- internal/suggest/fetcher.go (add: HTTP fetcher)\n- internal/suggest/robots.go (add: robots parsing)\n- internal/suggest/sitemap.go (add: sitemap parsing)\n- internal/suggest/templates/codex.md (add: codex template)\n- internal/instructions/adapter.go (add: adapter interface)\n- internal/instructions/codex.go (add: Codex adapter + helpers)\n- internal/instructions/helpers.go (add: instruction helpers)\n- internal/instructions/copilot.go (add: Copilot adapter)\n- internal/instructions/vscode.go (add: VS Code adapter)\n- internal/instructions/claude.go (add: Claude adapter)\n- internal/instructions/gemini.go (add: Gemini adapter)\n- docs/cli-transcripts/markdowntown-cli-mpg/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-mpg/make-test.txt (create: CI transcript)\n- docs/cli-transcripts/suggest-cli/cli-commands.txt (create: CLI transcript)\n\n## QA Evidence\n- CLI tests: `go test ./cmd/markdowntown -run TestSuggestCLI`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-mpg/go-test.txt` (exit 0)\n- Non-interactive: `docs/cli-transcripts/suggest-cli/cli-commands.txt` (piped stdin, exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-mpg/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: suggest/adapter base packages not on main; duplicated for CLI task; reran tests after fetcher init cleanup.\n- Setup improvements: merge suggest/instructions foundation tasks before CLI command work.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:56:09.537637-08:00","updated_at":"2025-12-31T02:11:48.365053-08:00","closed_at":"2025-12-31T02:11:48.365053-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-mpg","depends_on_id":"markdowntown-cli-wnh","type":"blocks","created_at":"2025-12-30T23:59:37.858608-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-mpg","depends_on_id":"markdowntown-cli-54c","type":"blocks","created_at":"2025-12-30T23:59:43.195856-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-mpg","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:56:09.539539-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-0xn","title":"Infra: dev tooling (Makefile, golangci, lefthook)","description":"- Add local dev tooling: Makefile targets, golangci-lint config, lefthook hooks.\n- Ensure `make check` runs lint + tests and matches CI expectations.\n\nAcceptance criteria:\n- Makefile includes build/test/lint/check/coverage targets per spec.\n- `.golangci.yml` enforces strict linting.\n- `.lefthook.yml` runs lint + tests on commit.\n\nEdge cases:\n- Ensure Windows paths and shells are supported in Makefile/CI.\n\nRisks/assumptions:\n- golangci-lint v2 is used (config version 2).\n\n## Files\n- Makefile (create: build/test/lint/check targets)\n- .golangci.yml (create: lint configuration)\n- .lefthook.yml (create: pre-commit hooks)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check` (see docs/cli-transcripts/markdowntown-cli-0xn/make-check.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-0xn/make-check.txt\n\n## Close Notes\n- Issues encountered: golangci-lint config needed version 2 and gofmt moved to formatters before lint passed.\n- Setup improvements: pin golangci-lint version in docs/CI to avoid config drift.\n- Debug info that would have helped: expected golangci-lint config version for the local binary.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:55:40.419945-08:00","updated_at":"2025-12-30T16:56:08.738205-08:00","closed_at":"2025-12-30T16:56:08.738205-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-0xn","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:55:40.422327-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-0xn","depends_on_id":"markdowntown-cli-za8","type":"blocks","created_at":"2025-12-30T16:01:19.26407-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-63x","title":"CLI: Add audit command + rendering","description":"Add the `audit` CLI command and output rendering.\n\nAcceptance criteria:\n- `markdowntown audit` supports scanning the repo or reading scan JSON via `--input \u003cfile|-\u003e`.\n- `--format json|md` and `--compact` are supported with stable output.\n- `--ignore-rule` and `--exclude` flags map to audit filters.\n- Exit codes follow spec (0 success, 1 findings with error severity, 2 fatal error).\n\nEdge cases:\n- Non-interactive stdin input, malformed JSON input, and unknown flags should return deterministic errors.\n\n## Files\n- cmd/markdowntown/main.go (modify: add audit command + flag parsing)\n- internal/audit/render.go (create: Markdown renderer)\n- docs/cli-transcripts/markdowntown-cli-63x/audit-stdout.txt (create: CLI transcript)\n- docs/cli-transcripts/markdowntown-cli-63x/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CLI tests: `go test ./cmd/markdowntown -run TestAuditCLI`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-63x/audit-stdout.txt`\n- Non-interactive: stdin path via `--input -` verified\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-63x/make-test.txt`\n\n## QA Evidence (Run)\n- CLI tests: `go test ./cmd/markdowntown -run TestAuditCLI`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-63x/go-test-audit.txt`\n- CLI output: `docs/cli-transcripts/markdowntown-cli-63x/audit-stdout.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-63x/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:54:02.828622-08:00","updated_at":"2025-12-31T10:45:08.064427-08:00","closed_at":"2025-12-31T10:45:08.064427-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-63x","depends_on_id":"markdowntown-cli-a36","type":"blocks","created_at":"2025-12-31T10:01:56.927653-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-63x","depends_on_id":"markdowntown-cli-lb7","type":"blocks","created_at":"2025-12-31T10:02:08.585108-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-63x","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T09:59:41.054271-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-083","title":"Core: Claude adapter","description":"- Implement Claude adapter: memory hierarchy (project/user/local), `.claude/rules` modules, frontmatter paths, and imports (ignore code blocks, max depth).\n- Handle CLAUDE.local.md support and deprecation warnings.\n\nAcceptance criteria:\n- Adapter resolves memory chain in documented order and records applied files.\n- Rules modules are applied with path scoping and import limits.\n- Tests validate memory precedence and import behavior.\n\nEdge cases:\n- Missing rules directory, circular imports, CLAUDE.local.md present with deprecation warning.\n\n## Files\n- internal/instructions/claude.go (create: Claude adapter)\n- internal/instructions/claude_test.go (create: Claude adapter tests)\n- docs/cli-transcripts/markdowntown-cli-083/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-083/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestClaudeAdapter`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-083/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-083/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:55:28.425357-08:00","updated_at":"2025-12-31T01:19:52.123175-08:00","closed_at":"2025-12-31T01:19:52.123175-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-083","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:55:28.427288-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-083","depends_on_id":"markdowntown-cli-aps","type":"blocks","created_at":"2025-12-30T23:59:16.494034-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-76j","title":"Design: Suggest CLI contract + schemas","description":"- Define command hierarchy (`suggest`, `resolve`, `audit`), flag schema, output formats (`--format json|md`, `--json`), exit codes, and stdout/stderr behavior.\n- Specify config precedence (flags \u003e env \u003e project \u003e user \u003e system) and XDG locations for config/cache.\n- Document evidence-only, fail-closed rules and proof object fields (sources, snapshot IDs, spans, normative strength, conflicts).\n\nAcceptance criteria:\n- New spec doc defines CLI contract, flags, exit codes, output schemas, and non-interactive expectations.\n- Output JSON schema is explicit and stable (versioned).\n- Config/cache locations and precedence are stated with examples.\n\nEdge cases:\n- Unknown client, stale cache, offline mode, partial refresh failures, stdout not a TTY.\n\n## Files\n- docs/suggest-spec-v1.md (create: CLI contract + output schema)\n- docs/architecture/suggest.md (create: pipeline + proof object overview)\n\n## QA Evidence\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-76j/make-test.txt` (exit 0)\n- Notes: doc-only change, ensure no lint/test regressions\n\n## Close Notes\n- Issues encountered: push initially failed due to `GITHUB_TOKEN` overriding gh credentials; used `env -u GITHUB_TOKEN` to push.\n- Setup improvements: clarify gh auth vs GITHUB_TOKEN for pushes in dev docs.\n- Debug info that would have helped: earlier note that `gh auth switch` is blocked while `GITHUB_TOKEN` is set.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T23:52:52.83884-08:00","updated_at":"2025-12-31T00:13:19.997445-08:00","closed_at":"2025-12-31T00:13:19.997445-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-76j","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:52:52.841209-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-lp8","title":"Epic: Evidence-Only Instruction Suggestions CLI","description":"Complete implementation of the correctness-first, evidence-only CLI workflow that distills authoritative documentation into suggestions for agent instruction files (Codex-first, extensible to Copilot/VS Code/Claude/Gemini).\n\n## Objective\nDeliver a CLI that produces only source-backed suggestions (fail-closed), includes a resolve/audit view of effective instruction chains, and refreshes documentation automatically without exposing the compilation pipeline to end users.\n\n## Success Criteria\n- [ ] `markdowntown suggest --client codex` emits suggestions only when Tier-0/1 evidence exists; every suggestion includes source links.\n- [ ] `markdowntown resolve --client \u003ccodex|copilot|vscode|claude|gemini\u003e` outputs effective instruction chains and flags conflicts/undefined ordering.\n- [ ] Built-in refresh respects robots.txt and uses conditional GETs; snapshots are stored with immutable hashes and provenance metadata.\n- [ ] JSON/Markdown outputs are stable, documented, and validated; stdout/stderr and exit codes are deterministic.\n- [ ] Config and cache locations follow XDG conventions.\n\n## QA Evidence Requirements\n- CLI integration coverage for `suggest`, `resolve`, and `audit`\n- Command transcripts (stdout/stderr + exit codes)\n- Non-interactive verification (no prompts; piped stdin where applicable)\n- Output formats validated (`--format json|md`, `--json`)\n- Config precedence + location verified (XDG)\n- Packaging + uninstall steps verified\n- CI green proof\n\n## Risks/Assumptions\n- Official docs define client discovery/merge semantics and can change over time; daily refresh is required.\n- Copilot/VS Code instruction ordering can be nondeterministic or undefined, requiring conflict detection and fail-closed behavior.\n- Robots.txt and conditional HTTP requirements must be honored; refresh may skip sources that disallow crawling.\n- Snapshot storage (WARC + hashes) increases disk usage and needs pruning policy.\n\n## Out of Scope\n- MCP server or background daemon\n- Inference beyond explicit documentation statements\n- Telemetry/analytics collection\n- Private or authenticated documentation sources\n\n## Sources\n- https://developers.openai.com/codex/guides/agents-md/\n- https://developers.openai.com/codex/config-reference\n- https://docs.github.com/en/copilot/how-tos/configure-custom-instructions/add-repository-instructions\n- https://code.visualstudio.com/docs/copilot/customization/custom-instructions\n- https://docs.claude.com/en/docs/claude-code/memory\n- https://geminicli.com/docs/cli/gemini-md/\n- https://www.rfc-editor.org/rfc/rfc9309\n- https://www.rfc-editor.org/rfc/rfc7232\n- https://www.rfc-editor.org/rfc/rfc9110\n- https://www.rfc-editor.org/rfc/rfc6920\n- https://iipc.github.io/warc-specifications/specifications/warc-format/warc-1.1/\n- https://www.sitemaps.org/protocol.html\n- https://specifications.freedesktop.org/basedir-spec/latest/\n- https://docs.brew.sh/Manpage\n\n\n## Close Notes\n- Issues encountered: none blocking; offline cache persistence is tracked in follow-up epic.\n- Setup improvements: follow-up epic `markdowntown-cli-q31` created for docs/caching/test helpers.\n- Debug info that would have helped: none.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-30T23:52:33.144425-08:00","updated_at":"2025-12-31T02:55:10.004315-08:00","closed_at":"2025-12-31T02:55:10.004315-08:00","created_by":"honk"}
{"id":"markdowntown-cli-6t6","title":"Core: git integration (root + gitignore)","description":"- Implement git root detection (`git rev-parse --show-toplevel`).\n- Add gitignore detection via `git check-ignore` (prefer batch/--stdin).\n- Return error if git unavailable or repo missing when required.\n\nAcceptance criteria:\n- Repo root detection works from any cwd within repo.\n- Gitignore checks return per-path boolean and tolerate missing files.\n- Errors are surfaced as fatal when git is missing.\n\nEdge cases:\n- Paths outside repo when `--repo` is provided.\n- Large batches; handle command length limits.\n\nRisks/assumptions:\n- Git available on PATH in all target envs.\n\n## Files\n- internal/git/root.go (create: repo root detection)\n- internal/git/ignore.go (create: git check-ignore wrapper)\n- internal/git/git.go (create: shared git command helpers)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `go test ./...` (see docs/cli-transcripts/markdowntown-cli-6t6/go-test.txt)\n- Transcripts: docs/cli-transcripts/markdowntown-cli-6t6/go-test.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: document expected path format for git check-ignore inputs.\n- Debug info that would have helped: examples of gitignore behavior for absolute vs relative paths.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:57:21.750757-08:00","updated_at":"2025-12-30T17:01:05.586067-08:00","closed_at":"2025-12-30T17:01:05.586067-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-6t6","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:57:21.752729-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-6t6","depends_on_id":"markdowntown-cli-za8","type":"blocks","created_at":"2025-12-30T16:01:46.125081-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-goe","title":"Testing: Audit v1 corrected behavior","description":"Add unit + integration tests and golden fixtures for corrected audit behavior.\n\n- Unit tests for:\n  - Redaction placeholders + pathId stability.\n  - Fingerprint determinism.\n  - Rule triggers (MD001 fallback, MD003 stable message, MD004 empty, MD005 scope-aware, MD006 merged).\n- Integration tests for CLI:\n  - --format md + json outputs (golden).\n  - --only/--exclude filtering.\n  - --include-scan-warnings behavior (dedupe vs issues).\n- Fixtures:\n  - Conflict group with override pair excluded.\n  - Multiple tools matching one file.\n  - User-scope paths to validate redaction placeholders.\n\nAcceptance criteria:\n- Golden outputs updated and deterministic.\n- All tests pass in CI.\n\nEdge cases:\n- Scan inputs with schemaVersion not semver.\n- Mixed separators (normalize paths in tests).\n\n## Files\n- internal/audit/*_test.go (create/modify: rule + redaction tests)\n- cmd/markdowntown/*_test.go (create/modify: CLI integration tests)\n- testdata/audit/*.json (create: scan fixtures)\n- testdata/golden/audit*.json (create/modify: JSON goldens)\n- testdata/golden/audit*.md (create/modify: MD goldens)\n\n## QA Evidence\n- Unit tests: `go test ./internal/audit -run Test` (or equivalent)\n- CLI tests: `go test ./cmd/markdowntown -run TestAudit` (or equivalent)\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/go-test-audit.txt, docs/cli-transcripts/\u003ctask-id\u003e/go-test-cli.txt, docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:59:58.09224-08:00","updated_at":"2025-12-31T12:00:08.69364-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-goe","depends_on_id":"markdowntown-cli-03q","type":"blocks","created_at":"2025-12-31T11:59:58.09805-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-goe","depends_on_id":"markdowntown-cli-50h","type":"parent-child","created_at":"2025-12-31T11:59:58.094517-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-goe","depends_on_id":"markdowntown-cli-uon","type":"blocks","created_at":"2025-12-31T11:59:58.095857-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-goe","depends_on_id":"markdowntown-cli-2fe","type":"blocks","created_at":"2025-12-31T11:59:58.096976-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-3pc","title":"Release: packaging + uninstall verification","description":"- Ensure new data/templates are included in packaging/release artifacts.\n- Validate install/uninstall steps (Homebrew or go install) and document them.\n- Confirm goreleaser config includes new assets.\n\nAcceptance criteria:\n- Release config includes new data files and templates.\n- Install/uninstall guidance is accurate and tested.\n- CI passes for snapshot release or build.\n\nEdge cases:\n- Missing assets in release bundle, stale docs in packaging notes.\n\n## Files\n- .goreleaser.yml (modify: include ai-config-patterns.json + doc-sources.json)\n- README.md (modify: packaging/uninstall notes + release archive registry guidance)\n- docs/cli-transcripts/markdowntown-cli-3pc/make-build.txt (create: release check transcript)\n- docs/cli-transcripts/markdowntown-cli-3pc/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Release check: `make build`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-3pc/make-build.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-3pc/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: registry.go conflict while bringing in source registry task; kept stricter allowlist/path validation.\n- Setup improvements: ensure release archives always ship registries alongside the binary.\n- Debug info that would have helped: none.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:57:38.428674-08:00","updated_at":"2025-12-31T02:50:57.954901-08:00","closed_at":"2025-12-31T02:50:57.954901-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-3pc","depends_on_id":"markdowntown-cli-mpg","type":"blocks","created_at":"2025-12-31T00:00:26.091423-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-3pc","depends_on_id":"markdowntown-cli-tkw","type":"blocks","created_at":"2025-12-31T00:00:31.423024-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-3pc","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:57:38.430277-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-lb7","title":"Security: Audit redaction + ignore filters","description":"Add audit filtering + privacy guardrails (ignore rules and redact user-scope paths).\n\nAcceptance criteria:\n- Audit engine supports rule suppression via rule IDs and path-exclude globs.\n- User-scope paths are redacted in audit output (e.g., `\u003cuser\u003e` or `~`) without losing determinism.\n- Redaction and filtering behavior is documented in the audit spec.\n\nEdge cases:\n- Redaction must preserve deterministic ordering and avoid leaking home directory names.\n\n## Files\n- internal/audit/filter.go (create: ignore-rule + exclude-path filters)\n- internal/audit/redact.go (create: user-scope path redaction)\n- internal/audit/filter_test.go (create: filter/redaction tests)\n- docs/cli-transcripts/markdowntown-cli-lb7/go-test-audit.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-lb7/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/audit -run TestFilters`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-lb7/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-lb7/make-test.txt`\n\n## QA Evidence (Run)\n- Unit tests: `go test ./internal/audit -run TestFilters`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-lb7/go-test-audit.txt`\n- CI: `make test`\n- Transcript: `docs/cli-transcripts/markdowntown-cli-lb7/make-test.txt`\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-31T09:53:39.133123-08:00","updated_at":"2025-12-31T10:26:33.155336-08:00","closed_at":"2025-12-31T10:26:33.155336-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-lb7","depends_on_id":"markdowntown-cli-fsd","type":"blocks","created_at":"2025-12-31T10:01:25.407969-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-lb7","depends_on_id":"markdowntown-cli-8bo","type":"parent-child","created_at":"2025-12-31T09:59:07.487491-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-4uq","title":"Core: Adapter interface + Codex resolution","description":"- Define adapter interface for resolving effective instruction chains.\n- Implement Codex adapter: AGENTS.override.md precedence, fallback filenames, CODEX_HOME, size cap (`project_doc_max_bytes`), and audit metadata.\n\nAcceptance criteria:\n- Adapter interface supports deterministic ordering + conflict reporting.\n- Codex resolution matches documented instruction chain behavior.\n- Unit tests validate precedence and size-limit behavior.\n\nEdge cases:\n- Both AGENTS.override.md and AGENTS.md in same dir, missing CODEX_HOME, custom fallback filenames.\n\n## Files\n- internal/instructions/adapter.go (create: adapter interface)\n- internal/instructions/codex.go (create: Codex adapter)\n- internal/instructions/codex_test.go (create: Codex adapter tests)\n- docs/cli-transcripts/markdowntown-cli-4uq/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-4uq/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/instructions -run TestCodexAdapter`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-4uq/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-4uq/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:54:59.545415-08:00","updated_at":"2025-12-31T00:38:26.82752-08:00","closed_at":"2025-12-31T00:38:26.82752-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-4uq","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:54:59.547223-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-4uq","depends_on_id":"markdowntown-cli-blo","type":"blocks","created_at":"2025-12-30T23:59:05.831028-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-4xm","title":"Epic: markdowntown scan v1 CLI","description":"Complete implementation of markdowntown scan v1 CLI.\n\n## Objective\nDeliver a deterministic, machine-readable inventory of AI tool config files across repo + user scopes with registry-backed patterns, suitable for audits/CI/onboarding. Includes scan, registry validate, and tools list commands with strict JSON output and reproducible ordering.\n\n## Primary User Case\nA developer or platform engineer runs `markdowntown scan` in a repo to produce stable JSON output that captures Codex/Copilot/Claude/etc. config files without extra setup or network access (except for optional registry validation).\n\n## Success Criteria\n- [x] `markdowntown scan` emits deterministic JSON per schema, including repo + user scopes, hashes, frontmatter, gitignored status, warnings, and sorted output.\n- [x] Pattern registry loads from XDG locations with ambiguity detection and env override.\n- [x] `markdowntown registry validate` performs syntax/schema/pattern/doc checks with JSON results.\n- [x] `markdowntown tools list` outputs a tool summary JSON array.\n- [x] CI + lint + tests + coverage thresholds pass across Go 1.22/1.23 and OS matrix.\n- [x] Docs cover usage, Codex CLI niceties, and QA evidence expectations.\n\n## QA Evidence Requirements\n- Playwright coverage for UI flows (N/A for CLI-only)\n- Screenshots stored in `docs/screenshots/scan-cli/`\n- DevTools MCP checks (N/A for CLI-only)\n- FE/BE logs reviewed (N/A for CLI-only)\n- CI green proof (commands recorded in each task)\n\n## Risks/Assumptions\n- Oracle critique script failed locally due to `skip_claude`/`claude_pid` unbound variables; proceeding without oracle feedback.\n- Cursor + Claude Code docs are JS-heavy; pattern verification may need manual review.\n- Gemini CLI docs for `.geminiignore`/`GEMINI.md` may require verification in the upstream repo docs.\n- Git is required and available on all target environments.\n\n## Out of Scope\n- Remote repo scanning (`scan-remote`)\n- `--for-file` effective config resolution\n- Multi-root workspace support\n- Custom user registries beyond `MARKDOWNTOWN_REGISTRY`\n\n## Sources\n- https://developers.openai.com/codex/guides/agents-md\n- https://developers.openai.com/codex/cli/slash-commands\n- https://developers.openai.com/codex/skills\n- https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions-for-github-copilot\n- https://docs.cline.bot/features/cline-rules\n- https://docs.continue.dev/configuration/configuration-file\n- https://aider.chat/docs/config.html\n- https://git-scm.com/docs/git-check-ignore\n- https://pkg.go.dev/golang.org/x/sync/errgroup\n- https://pkg.go.dev/path/filepath\n- https://pkg.go.dev/net/http\n\n## Close Notes\n- Issues encountered: `git push` failed because `origin` remote is not configured; `python` is not available (used `python3`).\n- Setup improvements: follow-up improvements tracked in epic `markdowntown-cli-fyg` (docs for git remote setup, screenshot tooling, fuzzing guidance).\n- Debug info that would have helped: clearer repo onboarding for remote configuration and docs tooling.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-30T15:53:49.499717-08:00","updated_at":"2025-12-30T18:48:33.713179-08:00","closed_at":"2025-12-30T18:48:33.713179-08:00","created_by":"honk"}
{"id":"markdowntown-cli-lrj","title":"Design: VS Code + Copilot CLI discovery matrix","description":"Document official VS Code + Copilot CLI discovery semantics in the scan spec, with a clear matrix of repo/user paths, settings gates, and order ambiguity.\n\n- Add a discovery matrix covering:\n  - VS Code: .github/copilot-instructions.md, .github/instructions/*.instructions.md (applyTo frontmatter), .github/prompts/*.prompt.md, AGENTS.md (chat.useAgentsMdFile + chat.useNestedAgentsMdFiles).\n  - Copilot CLI: .github/copilot-instructions.md, .github/copilot-instructions/**/*.instructions.md, AGENTS.md, .github/agents/*.md, ~/.copilot/config.json, ~/.copilot/mcp-config.json, ~/.copilot/agents/*.md.\n  - User profile prompt files: prompts folder under VS Code user profile.\n- Call out: instruction ordering is undefined when multiple instruction file types exist; conflicts should be treated as ambiguous.\n- Note limitations and guidance: chat.instructionsFilesLocations (custom instruction locations) are not auto-discovered; recommend --stdin for custom paths.\n- Capture assumptions about XDG_CONFIG_HOME and OS-specific VS Code profile paths.\n\nAcceptance criteria:\n- scan spec includes updated discovery matrix + notes above.\n- Assumptions and limitations are explicit.\n\nEdge cases:\n- Multiple instruction types present simultaneously (.github/instructions + .github/copilot-instructions + AGENTS).\n- XDG_CONFIG_HOME overrides.\n- User profile prompt paths differ by OS.\n\n## Files\n- docs/scan-spec-v1.md (modify: add VS Code/Copilot CLI matrix, ordering notes, XDG assumptions)\n\n## QA Evidence\n- Docs check: spell/format review completed\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/\u003ctask-id\u003e/make-test.txt\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T11:13:24.151278-08:00","updated_at":"2025-12-31T11:13:24.151278-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-lrj","depends_on_id":"markdowntown-cli-03u","type":"parent-child","created_at":"2025-12-31T11:13:24.153478-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-c7q","title":"Security: allowlist + secrets handling","description":"- Enforce source allowlist and scheme validation (https-only) for fetches.\n- Ensure no secrets are accepted via CLI flags; document env/file-based credentials if needed in future.\n- Add sanitization for file paths and cache writes to avoid traversal.\n\nAcceptance criteria:\n- Unknown hosts are rejected with explicit errors.\n- Fetcher rejects non-HTTPS sources.\n- Security notes documented in spec/user guide.\n\nEdge cases:\n- Redirects to non-allowlisted domains, malformed URLs, path traversal attempts.\n\n## Files\n- internal/suggest/fetcher.go (modify: allowlist/https enforcement)\n- internal/suggest/registry.go (modify: host validation)\n- internal/suggest/fetcher_test.go (modify: HTTPS enforcement test)\n- docs/suggest-spec-v1.md (modify: security notes)\n- docs/cli-transcripts/markdowntown-cli-c7q/go-test.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-c7q/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestFetcherSecurity`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-c7q/go-test.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-c7q/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: N/A.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T23:57:22.262888-08:00","updated_at":"2025-12-31T00:52:54.771039-08:00","closed_at":"2025-12-31T00:52:54.771039-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-c7q","depends_on_id":"markdowntown-cli-72e","type":"blocks","created_at":"2025-12-31T00:00:20.734819-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-c7q","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:57:22.264551-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-c7q","depends_on_id":"markdowntown-cli-zxd","type":"blocks","created_at":"2025-12-31T00:00:15.358089-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-3a4","title":"Security: scan hardening + error handling tests","description":"- Review security/privacy risks for filesystem scanning (symlink loops, permission errors, path traversal).\n- Add targeted tests for permission-denied and circular symlink warnings.\n- Document security considerations and guardrails.\n\nAcceptance criteria:\n- Security notes captured in `docs/architecture/security.md`.\n- Tests cover permission-denied + circular symlink warning behavior.\n- Scanner behavior avoids unsafe path traversal and handles errors gracefully.\n\nEdge cases:\n- Broken symlinks and external targets.\n- Files changing during scan.\n\nRisks/assumptions:\n- Test fixtures can simulate permission errors across OSes.\n\n## Files\n- docs/architecture/security.md (create: security notes + mitigations)\n- internal/scan/scanner_test.go (create: permission + symlink tests)\n- testdata/repos/security/README.md (create: fixture seed)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-3a4/make-check.txt\n\n## Close Notes\n- Issues encountered: gosec permission warnings and symlink path variance in tests; adjusted permissions and matching.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T15:59:08.563791-08:00","updated_at":"2025-12-30T18:10:05.986329-08:00","closed_at":"2025-12-30T18:10:05.986329-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-3a4","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:59:08.566078-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-3a4","depends_on_id":"markdowntown-cli-tan","type":"blocks","created_at":"2025-12-30T16:02:23.65615-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-aqm","title":"Core: Persist suggest cache for offline mode","description":"- Persist source fetch metadata + bodies to disk for offline mode.\n- Use XDG cache/data locations for metadata and cached snapshots.\n- Honor `--offline` and `--refresh` by loading cached bodies or forcing fetch.\n- Add tests for offline behavior and cached fetch reuse.\n\nAcceptance criteria:\n- `--offline` uses cached bodies when available and warns on misses.\n- `--refresh` forces a fetch even when cache metadata exists.\n- Metadata + cached bodies are stored under XDG cache/data paths.\n- Tests cover offline cache hits + misses.\n\n## Files\n- internal/suggest/cache.go (create: on-disk body cache)\n- internal/suggest/cache_test.go (create: cache round-trip test)\n- internal/suggest/metadata.go (modify: file-backed metadata store)\n- internal/suggest/metadata_test.go (modify: store get/put test)\n- cmd/markdowntown/suggest.go (modify: load/save cache + metadata)\n- cmd/markdowntown/suggest_test.go (modify: offline cache tests)\n- docs/USER_GUIDE.md (modify: offline behavior + cache paths)\n- README.md (modify: offline cache description)\n- docs/cli-transcripts/suggest-cli/cli-commands.txt (modify: offline transcript)\n- docs/cli-transcripts/suggest-cli/README.md (modify: reproduction command)\n- docs/cli-transcripts/markdowntown-cli-aqm/go-test-fetcher.txt (create: unit test transcript)\n- docs/cli-transcripts/markdowntown-cli-aqm/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestFetcher`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-aqm/go-test-fetcher.txt` (exit 0)\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-aqm/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: fetcher cherry-pick conflict resolved by keeping scheme validation; zsh `status` variable is read-only when capturing transcripts.\n- Setup improvements: keep offline transcripts updated with `MARKDOWNTOWN_SOURCES` + XDG paths.\n- Debug info that would have helped: none.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T02:54:07.915695-08:00","updated_at":"2025-12-31T03:11:44.88974-08:00","closed_at":"2025-12-31T03:11:44.88974-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-aqm","depends_on_id":"markdowntown-cli-q31","type":"parent-child","created_at":"2025-12-31T02:54:07.91723-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-jgc","title":"Docs: Source registry + cache metadata guide","description":"- Document `doc-sources.json` schema (tiers, refreshHours, allowlist) and override via `MARKDOWNTOWN_SOURCES`.\n- Document metadata cache location and expected cache directory layout.\n- Link the guide from README/USER_GUIDE.\n\nAcceptance criteria:\n- New guide describes all registry fields with examples.\n- README/USER_GUIDE link to the guide.\n- Metadata cache path is documented.\n\n## Files\n- docs/source-registry.md (create: schema + examples)\n- README.md (modify: link to source registry guide)\n- docs/USER_GUIDE.md (modify: link + cache metadata path)\n- docs/cli-transcripts/markdowntown-cli-jgc/make-test.txt (create: CI transcript)\n\n## QA Evidence\n- CI: `make test`\n  - Transcript: `docs/cli-transcripts/markdowntown-cli-jgc/make-test.txt` (exit 0)\n- Docs reviewed for accuracy vs source registry schema\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-31T02:53:51.759936-08:00","updated_at":"2025-12-31T03:15:13.735245-08:00","closed_at":"2025-12-31T03:15:13.735245-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-jgc","depends_on_id":"markdowntown-cli-q31","type":"parent-child","created_at":"2025-12-31T02:53:51.761308-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-72e","title":"Infra: Source registry + validation","description":"- Add a strict JSON source registry for documentation sources with trust tiers, refresh cadence, and allowlisted hosts.\n- Implement loader + validator (schema validation, duplicate URL detection, tier checks).\n- Expose registry loading errors as CLI diagnostics.\n\nAcceptance criteria:\n- Registry file exists with Tier-0/Tier-1 sources for Codex/Copilot/VS Code/Claude/Gemini.\n- Validation fails on unknown tiers, duplicate URLs, or missing required fields.\n- Unit tests cover registry parsing + validation errors.\n\nEdge cases:\n- Multiple registries present, missing registry, or invalid JSON.\n\n## Files\n- data/doc-sources.json (create: source registry)\n- internal/suggest/registry.go (create: loader/validator)\n- internal/suggest/registry_test.go (create: validation tests)\n\n## QA Evidence\n- Unit tests: `go test ./internal/suggest -run TestRegistry`\n- CI: `make test`\n- Transcripts: `docs/cli-transcripts/markdowntown-cli-72e/go-test.txt`, `docs/cli-transcripts/markdowntown-cli-72e/make-test.txt` (exit 0)\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: consider adding a short README describing source registry fields.\n- Debug info that would have helped: N/A.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T23:53:28.450003-08:00","updated_at":"2025-12-31T00:22:38.793272-08:00","closed_at":"2025-12-31T00:22:38.793272-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-72e","depends_on_id":"markdowntown-cli-lp8","type":"parent-child","created_at":"2025-12-30T23:53:28.451908-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-72e","depends_on_id":"markdowntown-cli-76j","type":"blocks","created_at":"2025-12-30T23:58:17.849301-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-nx1","title":"Core: output assembly + conflicts/warnings","description":"- Build output assembler for scan results (scans/configs/warnings/timing).\n- Implement deterministic sorting (scope → depth → path, toolId sorting).\n- Add conflict detection + warnings (config conflicts, circular symlink, unreadable).\n\nAcceptance criteria:\n- Output JSON matches schema with stable ordering.\n- Conflicts inferred by tool+scope+kind with override exceptions.\n- Warnings emitted for each occurrence without dedupe.\n\nEdge cases:\n- Multiple tools per file (dedupe by resolved path).\n- Missing stats (sizeBytes/sha256 null).\n\nRisks/assumptions:\n- Sorting stability across OS path separators.\n\n## Files\n- internal/scan/output.go (create: JSON output builder)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-nx1/make-check.txt\n\n## Close Notes\n- Issues encountered: none.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T15:58:24.050217-08:00","updated_at":"2025-12-30T17:53:18.305442-08:00","closed_at":"2025-12-30T17:53:18.305442-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-nx1","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T15:58:24.052433-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-nx1","depends_on_id":"markdowntown-cli-iun","type":"blocks","created_at":"2025-12-30T16:02:07.537915-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-uon","title":"Core: Audit schema, redaction, fingerprint","description":"Implement the audit schema + redaction core aligned to the corrected spec (string-tagged schema, provenance fields, deterministic redaction placeholders, and issue fingerprinting).\n\n- Add audit schema structs (top-level + issue) including audit/sourceScan provenance + registryVersionUsed.\n- Add audit schema version constant (audit-spec-v1) without changing scan schema version handling.\n- Implement redaction: repo-relative paths; non-repo paths redacted to $HOME/... or \u003cABS_PATH_N\u003e with deterministic pathId.\n- Implement issue fingerprint hashing from normalized fields (ruleId + sorted paths/tools + key evidence values).\n- Fix ordering comparator to use explicit severity order (error \u003e warning \u003e info).\n\nAcceptance criteria:\n- Audit output includes provenance + fingerprint fields as specified.\n- Redaction hides all non-repo absolute paths by default with stable placeholders.\n- Ordering is deterministic and matches spec.\n\nEdge cases:\n- Mixed path scopes in one issue.\n- Identical paths producing stable pathId within a run.\n\n## Files\n- internal/audit/types.go (create: schema structs + constants)\n- internal/audit/redact.go (create: redaction + pathId mapping)\n- internal/audit/engine.go (create/modify: ordering + fingerprint application)\n- internal/audit/*_test.go (create: redaction + fingerprint tests)\n- internal/version/version.go (modify: add AuditSchemaVersion constant)\n\n## QA Evidence\n- Unit tests: `go test ./internal/audit -run 'TestRedactor|TestFingerprint'`\n- CI: `make test`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-uon/go-test-audit.txt, docs/cli-transcripts/markdowntown-cli-uon/make-test.txt\n","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-31T11:58:51.78491-08:00","updated_at":"2025-12-31T12:18:21.703579-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-uon","depends_on_id":"markdowntown-cli-50h","type":"parent-child","created_at":"2025-12-31T11:58:51.786995-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-uon","depends_on_id":"markdowntown-cli-q7v","type":"blocks","created_at":"2025-12-31T11:58:51.788275-08:00","created_by":"honk"}]}
{"id":"markdowntown-cli-ezy","title":"Testing: integration + golden scan tests","description":"- Add fixture repos under `testdata/repos/` (sanitized) and golden JSON outputs.\n- Implement integration tests for scan output (ignore timestamps).\n- Include stdin path handling and multi-tool dedupe cases.\n\nAcceptance criteria:\n- Golden tests compare structural output ignoring timestamps.\n- Integration tests cover repo + user scopes, gitignored flags, and conflict warnings.\n- `go test -update-golden` updates fixtures deterministically.\n\nEdge cases:\n- Circular symlink fixture and permission-denied fixture.\n- Mixed tool matches for same file.\n\nRisks/assumptions:\n- Fixtures remain small enough for CI.\n\n## Files\n- testdata/repos/integration/.cursorrules (create: repo fixture)\n- testdata/repos/integration/.cursor/rules/main.md (create: repo fixture)\n- testdata/repos/integration/shared/config.json (create: repo fixture)\n- testdata/repos/integration/ignored.txt (create: repo fixture)\n- testdata/repos/integration/.gitignore (create: repo fixture)\n- testdata/repos/integration/stdin/unmatched.txt (create: repo fixture)\n- testdata/golden/scan.json (create: golden output)\n- internal/scan/scanner_integration_test.go (create: integration tests)\n- internal/scan/gitignore.go (create: gitignore annotation helper)\n- cmd/markdowntown/main.go (modify: apply gitignore flags)\n\n## QA Evidence\n- Playwright: N/A (CLI-only)\n- Screenshots: N/A (CLI-only)\n- DevTools MCP: N/A (CLI-only)\n- Logs: N/A (CLI-only)\n- CI: `make check`\n- Transcripts: docs/cli-transcripts/markdowntown-cli-ezy/make-check.txt\n\n## Close Notes\n- Issues encountered: gosec flagged golden file read; added #nosec for test-controlled path.\n- Setup improvements: none.\n- Debug info that would have helped: none.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T16:00:11.136062-08:00","updated_at":"2025-12-30T18:23:54.024211-08:00","closed_at":"2025-12-30T18:23:54.024211-08:00","created_by":"honk","dependencies":[{"issue_id":"markdowntown-cli-ezy","depends_on_id":"markdowntown-cli-tan","type":"blocks","created_at":"2025-12-30T16:02:55.847458-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-ezy","depends_on_id":"markdowntown-cli-3a4","type":"blocks","created_at":"2025-12-30T16:03:01.212776-08:00","created_by":"honk"},{"issue_id":"markdowntown-cli-ezy","depends_on_id":"markdowntown-cli-4xm","type":"parent-child","created_at":"2025-12-30T16:00:11.138024-08:00","created_by":"honk"}]}
